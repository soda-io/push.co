/*! fancy-graph - v0.9.999999999 - 2014-05-07
Contains underscore and Zepto libraries.

copyright @selead, MIT licence */
(function(){function a(b,c,d){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;if(b._chain&&(b=b._wrapped),c._chain&&(c=c._wrapped),b.isEqual&&v.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&v.isFunction(c.isEqual))return c.isEqual(b);var e=i.call(b);if(e!=i.call(c))return!1;switch(e){case"[object String]":return b==""+c;case"[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case"[object Date]":case"[object Boolean]":return+b==+c;case"[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var f=0,g=!0;if("[object Array]"==e){if(f=b.length,g=f==c.length)for(;f--&&(g=f in b==f in c&&a(b[f],c[f],d)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var h in b)if(v.has(b,h)&&(f++,!(g=v.has(c,h)&&a(b[h],c[h],d))))break;if(g){for(h in c)if(v.has(c,h)&&!f--)break;g=!f}}return d.pop(),g}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=e.slice,h=e.unshift,i=f.toString,j=f.hasOwnProperty,k=e.forEach,l=e.map,m=e.reduce,n=e.reduceRight,o=e.filter,p=e.every,q=e.some,r=e.indexOf,s=e.lastIndexOf,f=Array.isArray,t=Object.keys,u=Function.prototype.bind,v=function(a){return new G(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):b._=v,v.VERSION="1.3.3";var w=v.each=v.forEach=function(a,b,c){if(null!=a)if(k&&a.forEach===k)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;f>e&&!(e in a&&b.call(c,a[e],e,a)===d);e++);else for(e in a)if(v.has(a,e)&&b.call(c,a[e],e,a)===d)break};v.map=v.collect=function(a,b,c){var d=[];return null==a?d:l&&a.map===l?a.map(b,c):(w(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},v.reduce=v.foldl=v.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),m&&a.reduce===m)return d&&(b=v.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(w(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},v.reduceRight=v.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduceRight===n)return d&&(b=v.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=v.toArray(a).reverse();return d&&!e&&(b=v.bind(b,d)),e?v.reduce(f,b,c,d):v.reduce(f,b)},v.find=v.detect=function(a,b,c){var d;return x(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},v.filter=v.select=function(a,b,c){var d=[];return null==a?d:o&&a.filter===o?a.filter(b,c):(w(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},v.reject=function(a,b,c){var d=[];return null==a?d:(w(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},v.every=v.all=function(a,b,c){var e=!0;return null==a?e:p&&a.every===p?a.every(b,c):(w(a,function(a,f,g){return(e=e&&b.call(c,a,f,g))?void 0:d}),!!e)};var x=v.some=v.any=function(a,b,c){b||(b=v.identity);var e=!1;return null==a?e:q&&a.some===q?a.some(b,c):(w(a,function(a,f,g){return e||(e=b.call(c,a,f,g))?d:void 0}),!!e)};v.include=v.contains=function(a,b){var c=!1;return null==a?c:r&&a.indexOf===r?-1!=a.indexOf(b):c=x(a,function(a){return a===b})},v.invoke=function(a,b){var c=g.call(arguments,2);return v.map(a,function(a){return(v.isFunction(b)?b||a:a[b]).apply(a,c)})},v.pluck=function(a,b){return v.map(a,function(a){return a[b]})},v.max=function(a,b,c){if(!b&&v.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&v.isEmpty(a))return-1/0;var d={computed:-1/0};return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e>=d.computed&&(d={value:a,computed:e})}),d.value},v.min=function(a,b,c){if(!b&&v.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&v.isEmpty(a))return 1/0;var d={computed:1/0};return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e<d.computed&&(d={value:a,computed:e})}),d.value},v.shuffle=function(a){var b,c=[];return w(a,function(a,d){b=Math.floor(Math.random()*(d+1)),c[d]=c[b],c[b]=a}),c},v.sortBy=function(a,b,c){var d=v.isFunction(b)?b:function(a){return a[b]};return v.pluck(v.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:d>c?-1:c>d?1:0}),"value")},v.groupBy=function(a,b){var c={},d=v.isFunction(b)?b:function(a){return a[b]};return w(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},v.sortedIndex=function(a,b,c){c||(c=v.identity);for(var d=0,e=a.length;e>d;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},v.toArray=function(a){return a?v.isArray(a)||v.isArguments(a)?g.call(a):a.toArray&&v.isFunction(a.toArray)?a.toArray():v.values(a):[]},v.size=function(a){return v.isArray(a)?a.length:v.keys(a).length},v.first=v.head=v.take=function(a,b,c){return null==b||c?a[0]:g.call(a,0,b)},v.initial=function(a,b,c){return g.call(a,0,a.length-(null==b||c?1:b))},v.last=function(a,b,c){return null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))},v.rest=v.tail=function(a,b,c){return g.call(a,null==b||c?1:b)},v.compact=function(a){return v.filter(a,function(a){return!!a})},v.flatten=function(a,b){return v.reduce(a,function(a,c){return v.isArray(c)?a.concat(b?c:v.flatten(c)):(a[a.length]=c,a)},[])},v.without=function(a){return v.difference(a,g.call(arguments,1))},v.uniq=v.unique=function(a,b,c){var c=c?v.map(a,c):a,d=[];return a.length<3&&(b=!0),v.reduce(c,function(c,e,f){return(b?v.last(c)===e&&c.length:v.include(c,e))||(c.push(e),d.push(a[f])),c},[]),d},v.union=function(){return v.uniq(v.flatten(arguments,!0))},v.intersection=v.intersect=function(a){var b=g.call(arguments,1);return v.filter(v.uniq(a),function(a){return v.every(b,function(b){return v.indexOf(b,a)>=0})})},v.difference=function(a){var b=v.flatten(g.call(arguments,1),!0);return v.filter(a,function(a){return!v.include(b,a)})},v.zip=function(){for(var a=g.call(arguments),b=v.max(v.pluck(a,"length")),c=Array(b),d=0;b>d;d++)c[d]=v.pluck(a,""+d);return c},v.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=v.sortedIndex(a,b),a[c]===b?c:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1},v.lastIndexOf=function(a,b){if(null==a)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1},v.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);d>e;)f[e++]=a,a+=c;return f};var y=function(){};v.bind=function(a,b){var c,d;if(a.bind===u&&u)return u.apply(a,g.call(arguments,1));if(!v.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(!(this instanceof c))return a.apply(b,d.concat(g.call(arguments)));y.prototype=a.prototype;var e=new y,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}},v.bindAll=function(a){var b=g.call(arguments,1);return 0==b.length&&(b=v.functions(a)),w(b,function(b){a[b]=v.bind(a[b],a)}),a},v.memoize=function(a,b){var c={};return b||(b=v.identity),function(){var d=b.apply(this,arguments);return v.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},v.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},v.defer=function(a){return v.delay.apply(v,[a,1].concat(g.call(arguments,1)))},v.throttle=function(a,b){var c,d,e,f,g,h,i=v.debounce(function(){g=f=!1},b);return function(){return c=this,d=arguments,e||(e=setTimeout(function(){e=null,g&&a.apply(c,d),i()},b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}},v.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b)}},v.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},v.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},v.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},v.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},v.keys=t||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b,c=[];for(b in a)v.has(a,b)&&(c[c.length]=b);return c},v.values=function(a){return v.map(a,v.identity)},v.functions=v.methods=function(a){var b,c=[];for(b in a)v.isFunction(a[b])&&c.push(b);return c.sort()},v.extend=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},v.pick=function(a){var b={};return w(v.flatten(g.call(arguments,1)),function(c){c in a&&(b[c]=a[c])}),b},v.defaults=function(a){return w(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},v.clone=function(a){return v.isObject(a)?v.isArray(a)?a.slice():v.extend({},a):a},v.tap=function(a,b){return b(a),a},v.isEqual=function(b,c){return a(b,c,[])},v.isEmpty=function(a){if(null==a)return!0;if(v.isArray(a)||v.isString(a))return 0===a.length;for(var b in a)if(v.has(a,b))return!1;return!0},v.isElement=function(a){return!(!a||1!=a.nodeType)},v.isArray=f||function(a){return"[object Array]"==i.call(a)},v.isObject=function(a){return a===Object(a)},v.isArguments=function(a){return"[object Arguments]"==i.call(a)},v.isArguments(arguments)||(v.isArguments=function(a){return!(!a||!v.has(a,"callee"))}),v.isFunction=function(a){return"[object Function]"==i.call(a)},v.isString=function(a){return"[object String]"==i.call(a)},v.isNumber=function(a){return"[object Number]"==i.call(a)},v.isFinite=function(a){return v.isNumber(a)&&isFinite(a)},v.isNaN=function(a){return a!==a},v.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==i.call(a)},v.isDate=function(a){return"[object Date]"==i.call(a)},v.isRegExp=function(a){return"[object RegExp]"==i.call(a)},v.isNull=function(a){return null===a},v.isUndefined=function(a){return void 0===a},v.has=function(a,b){return j.call(a,b)},v.noConflict=function(){return b._=c,this},v.identity=function(a){return a},v.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)},v.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},v.result=function(a,b){if(null==a)return null;var c=a[b];return v.isFunction(c)?c.call(a):c},v.mixin=function(a){w(v.functions(a),function(b){I(b,v[b]=a[b])})};var z=0;v.uniqueId=function(a){var b=z++;return a?a+b:b},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A,B=/.^/,C={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(A in C)C[C[A]]=A;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,E=/\\(\\|'|r|n|t|u2028|u2029)/g,F=function(a){return a.replace(E,function(a,b){return C[b]})};v.template=function(a,b,c){c=v.defaults(c||{},v.templateSettings),a="__p+='"+a.replace(D,function(a){return"\\"+C[a]}).replace(c.escape||B,function(a,b){return"'+\n_.escape("+F(b)+")+\n'"}).replace(c.interpolate||B,function(a,b){return"'+\n("+F(b)+")+\n'"}).replace(c.evaluate||B,function(a,b){return"';\n"+F(b)+"\n;__p+='"})+"';\n",c.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",d=new Function(c.variable||"obj","_",a);return b?d(b,v):(b=function(a){return d.call(this,a,v)},b.source="function("+(c.variable||"obj")+"){\n"+a+"}",b)},v.chain=function(a){return v(a).chain()};var G=function(a){this._wrapped=a};v.prototype=G.prototype;var H=function(a,b){return b?v(a).chain():a},I=function(a,b){G.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),H(b.apply(v,a),this._chain)}};v.mixin(v),w("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=e[a];G.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return("shift"==a||"splice"==a)&&0===d&&delete c[0],H(c,this._chain)}}),w(["concat","join","slice"],function(a){var b=e[a];G.prototype[a]=function(){return H(b.apply(this._wrapped,arguments),this._chain)}}),G.prototype.chain=function(){return this._chain=!0,this},G.prototype.value=function(){return this._wrapped}}).call(this),function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(void 0===this||null===this)throw new TypeError;var c,d=Object(this),e=d.length>>>0,f=0;if("function"!=typeof b)throw new TypeError;if(0==e&&1==arguments.length)throw new TypeError;if(arguments.length>=2)c=arguments[1];else for(;;){if(f in d){c=d[f++];break}if(++f>=e)throw new TypeError}for(;e>f;)f in d&&(c=b.call(a,c,d[f],f,d)),f++;return c})}();var Zepto=function(){function a(a){return"[object Function]"==M.call(a)}function b(a){return a instanceof Object}function c(b){var c,d;if("[object Object]"!==M.call(b))return!1;if(d=a(b.constructor)&&b.constructor.prototype,!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(c in b);return c===p||hasOwnProperty.call(b,c)}function d(a){return a instanceof Array}function e(a){return"number"==typeof a.length}function f(a){return a.filter(function(a){return a!==p&&null!==a})}function g(a){return a.length>0?[].concat.apply([],a):a}function h(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function i(a){return a in z?z[a]:z[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function j(a,b){return"number"!=typeof b||B[h(a)]?b:b+"px"}function k(a){var b,c;return y[a]||(b=x.createElement(a),x.body.appendChild(b),c=A(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),y[a]=c),y[a]}function l(a,b){return b===p?r(a):r(a).filter(b)}function m(b,c,d,e){return a(c)?c.call(b,d,e):c}function n(a,b,c){var d=a%2?b:b.parentNode;d?d.insertBefore(c,a?1==a?d.firstChild:2==a?b:null:b.nextSibling):r(c).remove()}function o(a,b){b(a);for(var c in a.childNodes)o(a.childNodes[c],b)}var p,q,r,s,t,u,v=[],w=v.slice,x=window.document,y={},z={},A=x.defaultView.getComputedStyle,B={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},C=/^\s*<(\w+|!)[^>]*>/,D=[1,3,8,9,11],E=["after","prepend","before","append"],F=x.createElement("table"),G=x.createElement("tr"),H={tr:x.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:G,th:G,"*":x.createElement("div")},I=/complete|loaded|interactive/,J=/^\.([\w-]+)$/,K=/^#([\w-]+)$/,L=/^[\w-]+$/,M={}.toString,N={},O=x.createElement("div");return N.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=O).appendChild(a),d=~N.qsa(e,b).indexOf(a),f&&O.removeChild(a),d},t=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},u=function(a){return a.filter(function(b,c){return a.indexOf(b)==c})},N.fragment=function(a,b){b===p&&(b=C.test(a)&&RegExp.$1),b in H||(b="*");var c=H[b];return c.innerHTML=""+a,r.each(w.call(c.childNodes),function(){c.removeChild(this)})},N.Z=function(a,b){return a=a||[],a.__proto__=arguments.callee.prototype,a.selector=b||"",a},N.isZ=function(a){return a instanceof N.Z},N.init=function(b,e){if(!b)return N.Z();if(a(b))return r(x).ready(b);if(N.isZ(b))return b;var g;if(d(b))g=f(b);else if(c(b))g=[r.extend({},b)],b=null;else if(D.indexOf(b.nodeType)>=0||b===window)g=[b],b=null;else if(C.test(b))g=N.fragment(b.trim(),RegExp.$1),b=null;else{if(e!==p)return r(e).find(b);g=N.qsa(x,b)}return N.Z(g,b)},r=function(a,b){return N.init(a,b)},r.extend=function(a){return w.call(arguments,1).forEach(function(b){for(q in b)b[q]!==p&&(a[q]=b[q])}),a},N.qsa=function(a,b){var c;return a===x&&K.test(b)?(c=a.getElementById(RegExp.$1))?[c]:v:1!==a.nodeType&&9!==a.nodeType?v:w.call(J.test(b)?a.getElementsByClassName(RegExp.$1):L.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},r.isFunction=a,r.isObject=b,r.isArray=d,r.isPlainObject=c,r.inArray=function(a,b,c){return v.indexOf.call(b,a,c)},r.trim=function(a){return a.trim()},r.uuid=0,r.map=function(a,b){var c,d,f,h=[];if(e(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&h.push(c);else for(f in a)c=b(a[f],f),null!=c&&h.push(c);return g(h)},r.each=function(a,b){var c,d;if(e(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},r.fn={forEach:v.forEach,reduce:v.reduce,push:v.push,indexOf:v.indexOf,concat:v.concat,map:function(a){return r.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return r(w.apply(this,arguments))},ready:function(a){return I.test(x.readyState)?a(r):x.addEventListener("DOMContentLoaded",function(){a(r)},!1),this},get:function(a){return a===p?w.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return this.forEach(function(b,c){a.call(b,c,b)}),this},filter:function(a){return r([].filter.call(this,function(b){return N.matches(b,a)}))},add:function(a,b){return r(u(this.concat(r(a,b))))},is:function(a){return this.length>0&&N.matches(this[0],a)},not:function(b){var c=[];if(a(b)&&b.call!==p)this.each(function(a){b.call(this,a)||c.push(this)});else{var d="string"==typeof b?this.filter(b):e(b)&&a(b.item)?w.call(b):r(b);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return r(c)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!b(a)?a:r(a)},last:function(){var a=this[this.length-1];return a&&!b(a)?a:r(a)},find:function(a){var b;return b=1==this.length?N.qsa(this[0],a):this.map(function(){return N.qsa(this,a)}),r(b)},closest:function(a,b){for(var c=this[0];c&&!N.matches(c,a);)c=c!==b&&c!==x&&c.parentNode;return r(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=r.map(c,function(a){return(a=a.parentNode)&&a!==x&&b.indexOf(a)<0?(b.push(a),a):void 0});return l(b,a)},parent:function(a){return l(u(this.pluck("parentNode")),a)},children:function(a){return l(this.map(function(){return w.call(this.children)}),a)},siblings:function(a){return l(this.map(function(a,b){return w.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==A(this,"").getPropertyValue("display")&&(this.style.display=k(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){r(this).wrapAll(r(a)[0].cloneNode(!1))})},wrapAll:function(a){return this[0]&&(r(this[0]).before(a=r(a)),a.append(this)),this},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return r(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(a){return(a===p?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return r(this.pluck("previousElementSibling"))},next:function(){return r(this.pluck("nextElementSibling"))},html:function(a){return a===p?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;r(this).empty().append(m(this,a,b,c))})},text:function(a){return a===p?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,c){var d;return"string"==typeof a&&c===p?0==this.length||1!==this[0].nodeType?p:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(d=this[0].getAttribute(a))&&a in this[0]?this[0][a]:d:this.each(function(d){if(1===this.nodeType)if(b(a))for(q in a)this.setAttribute(q,a[q]);else this.setAttribute(a,m(this,c,d,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,b){return b===p?this[0]?this[0][a]:p:this.each(function(c){this[a]=m(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+h(a),b);return null!==c?c:p},val:function(a){return a===p?this.length>0?this[0].value:p:this.each(function(b){this.value=m(this,a,b,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(a,b){if(b===p&&"string"==typeof a)return 0==this.length?p:this[0].style[t(a)]||A(this[0],"").getPropertyValue(a);var c="";for(q in a)"string"==typeof a[q]&&""==a[q]?this.each(function(){this.style.removeProperty(h(q))}):c+=h(q)+":"+j(q,a[q])+";";return"string"==typeof a&&(""==b?this.each(function(){this.style.removeProperty(h(a))}):c=h(a)+":"+j(a,b)),this.each(function(){this.style.cssText+=";"+c})},index:function(a){return a?this.indexOf(r(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return this.length<1?!1:i(a).test(this[0].className)},addClass:function(a){return this.each(function(b){s=[];var c=this.className,d=m(this,a,b,c);d.split(/\s+/g).forEach(function(a){r(this).hasClass(a)||s.push(a)},this),s.length&&(this.className+=(c?" ":"")+s.join(" "))})},removeClass:function(a){return this.each(function(b){return a===p?this.className="":(s=this.className,m(this,a,b,s).split(/\s+/g).forEach(function(a){s=s.replace(i(a)," ")}),this.className=s.trim(),void 0)})},toggleClass:function(a,b){return this.each(function(c){var d=m(this,a,c,this.className);(b===p?!r(this).hasClass(d):b)?r(this).addClass(d):r(this).removeClass(d)})}},["width","height"].forEach(function(a){r.fn[a]=function(b){var c,d=a.replace(/./,function(a){return a[0].toUpperCase()});return b===p?this[0]==window?window["inner"+d]:this[0]==x?x.documentElement["offset"+d]:(c=this.offset())&&c[a]:this.each(function(c){var d=r(this);d.css(a,m(this,b,c,d[a]()))})}}),E.forEach(function(a,c){r.fn[a]=function(){var a=r.map(arguments,function(a){return b(a)?a:N.fragment(a)});if(a.length<1)return this;var d=this.length,e=d>1,f=2>c;return this.each(function(b,g){for(var h=0;h<a.length;h++){var i=a[f?a.length-h-1:h];o(i,function(a){null!=a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&window.eval.call(window,a.innerHTML)}),e&&d-1>b&&(i=i.cloneNode(!0)),n(c,g,i)}})},r.fn[c%2?a+"To":"insert"+(c?"Before":"After")]=function(b){return r(b)[a](this),this}}),N.Z.prototype=r.fn,N.camelize=t,N.uniq=u,r.zepto=N,r}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function b(a){return a._zid||(a._zid=l++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(k[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function g(c,e,g,h,i,j){j=!!j;var l=b(c),m=k[l]||(k[l]=[]);f(e,g,function(b,e){var f=i&&i(e,b),g=f||e,k=function(a){var b=g.apply(c,[a].concat(a.data));return b===!1&&a.preventDefault(),b},l=a.extend(d(b),{fn:e,proxy:k,sel:h,del:f,i:m.length});m.push(l),c.addEventListener(l.e,k,j)})}function h(a,d,e,g){var h=b(a);f(d||"",e,function(b,d){c(a,b,d,g).forEach(function(b){delete k[h][b.i],a.removeEventListener(b.e,b.proxy,!1)})})}function i(b){var c=a.extend({originalEvent:b},b);return a.each(p,function(a,d){c[a]=function(){return this[d]=n,b[a].apply(b,arguments)},c[d]=o}),c}function j(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var k=(a.zepto.qsa,{}),l=1,m={};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",a.event={add:g,remove:h},a.proxy=function(c,d){if(a.isFunction(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if("string"==typeof d)return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){g(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){h(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){g(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return h(d,b,a),c}})})};var n=function(){return!0},o=function(){return!1},p={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){var e=!1;return("blur"==c||"focus"==c)&&(a.iswebkit?c="blur"==c?"focusout":"focus"==c?"focusin":c:e=!0),this.each(function(f,h){g(h,c,d,b,function(c){return function(d){var e,f=a(d.target).closest(b,h).get(0);return f?(e=a.extend(i(d),{currentTarget:f,liveFired:h}),c.apply(f,[e].concat([].slice.call(arguments,1)))):void 0}},e)})},a.fn.undelegate=function(a,b,c){return this.each(function(){h(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return void 0==c||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return void 0==c||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return"string"==typeof b&&(b=a.Event(b)),j(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=i("string"==typeof b?a.Event(b):b),e.data=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}}),a.Event=function(a,b){var c=document.createEvent(m[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}}(Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/);(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0)}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a,b){function c(a){return a.toLowerCase()}function d(a){return e?e+a:c(a)}var e,f="",g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k={};a.each(g,function(a,d){return i.style[a+"TransitionProperty"]!==b?(f="-"+c(a)+"-",e=d,!1):void 0}),k[f+"transition-property"]=k[f+"transition-duration"]=k[f+"transition-timing-function"]=k[f+"animation-name"]=k[f+"animation-duration"]="",a.fx={off:e===b&&i.style.transitionProperty===b,cssPrefix:f,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c/=1e3),this.anim(b,c,d,e)},a.fn.anim=function(c,d,e,g){var h,i,l,m={},n=this,o=a.fx.transitionEnd;if(d===b&&(d=.4),a.fx.off&&(d=0),"string"==typeof c)m[f+"animation-name"]=c,m[f+"animation-duration"]=d+"s",o=a.fx.animationEnd;else{for(i in c)j.test(i)?(h||(h=[]),h.push(i+"("+c[i]+")")):m[i]=c[i];h&&(m[f+"transform"]=h.join(" ")),!a.fx.off&&"object"==typeof c&&(m[f+"transition-property"]=Object.keys(c).join(", "),m[f+"transition-duration"]=d+"s",m[f+"transition-timing-function"]=e||"linear")}return l=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(o,arguments.callee)}a(this).css(k),g&&g.call(this)},d>0&&this.bind(o,l),setTimeout(function(){n.css(m),0>=d&&setTimeout(function(){n.each(function(){l.call(this)})},0)},0),this},i=null}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:(c(b,d,"ajaxSend",[a,b]),void 0)}function g(a,b,d){var e=d.context,f="success";d.success.call(e,a,f,b),c(d,e,"ajaxSuccess",[b,d,a]),i(f,b,d)}function h(a,b,d,e){var f=e.context;e.error.call(f,d,b,a),c(e,f,"ajaxError",[d,e,a]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){r(b.data)&&(b.data=a.param(b.data)),b.data&&(!b.type||"GET"==b.type.toUpperCase())&&(b.url=l(b.url,b.data))}function n(b,c,d,e){var f=a.isArray(c);a.each(c,function(c,g){e&&(c=d?e:e+"["+(f?"":c)+"]"),!e&&f?b.add(g.name,g.value):(d?a.isArray(g):r(g))?n(b,g,d,c):b.add(c,g)})}var o,p,q=0,r=a.isObject,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b){var c,d="jsonp"+ ++q,e=s.createElement("script"),f=function(){a(e).remove(),d in window&&(window[d]=j),i("abort",h,b)},h={abort:f};return b.error&&(e.onerror=function(){h.abort(),b.error()}),window[d]=function(f){clearTimeout(c),a(e).remove(),delete window[d],g(f,h,b)},m(b),e.src=b.url.replace(/=\?/,"="+d),a("head").append(e),b.timeout>0&&(c=setTimeout(function(){h.abort(),i("timeout",h,b)},b.timeout)),h},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0},a.ajax=function(b){var c=a.extend({},b||{});for(o in a.ajaxSettings)void 0===c[o]&&(c[o]=a.ajaxSettings[o]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host);var e=c.dataType,i=/=\?/.test(c.url);if("jsonp"==e||i)return i||(c.url=l(c.url,"callback=?")),a.ajaxJSONP(c);c.url||(c.url=window.location.toString()),m(c);var n,q=c.accepts[e],r={},s=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,t=a.ajaxSettings.xhr();c.crossDomain||(r["X-Requested-With"]="XMLHttpRequest"),q&&(r.Accept=q,q.indexOf(",")>-1&&(q=q.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(q)),(c.contentType||c.data&&"GET"!=c.type.toUpperCase())&&(r["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=a.extend(r,c.headers||{}),t.onreadystatechange=function(){if(4==t.readyState){clearTimeout(n);var a,b=!1;if(t.status>=200&&t.status<300||304==t.status||0==t.status&&"file:"==s){e=e||k(t.getResponseHeader("content-type")),a=t.responseText;try{"script"==e?(1,eval)(a):"xml"==e?a=t.responseXML:"json"==e&&(a=y.test(a)?null:JSON.parse(a))}catch(d){b=d
}b?h(b,"parsererror",t,c):g(a,t,c)}else h(null,"error",t,c)}};var u="async"in c?c.async:!0;t.open(c.type,c.url,u);for(p in c.headers)t.setRequestHeader(p,c.headers[p]);return f(t,c)===!1?(t.abort(),!1):(c.timeout>0&&(n=setTimeout(function(){t.onreadystatechange=j,t.abort(),h(null,"timeout",t,c)},c.timeout)),t.send(c.data?c.data:null),t)},a.get=function(b,c){return a.ajax({url:b,success:c})},a.post=function(b,c,d,e){return a.isFunction(c)&&(e=e||d,d=c,c=null),a.ajax({type:"POST",url:b,data:c,success:d,dataType:e})},a.getJSON=function(b,c){return a.ajax({url:b,success:c,dataType:"json"})},a.fn.load=function(b,c){if(!this.length)return this;var d,e=this,f=b.split(/\s/);return f.length>1&&(b=f[0],d=f[1]),a.get(b,function(b){e.html(d?a(s.createElement("div")).html(b.replace(t,"")).find(d).html():b),c&&c.call(e)}),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},n(c,a,b),c.join("&").replace("%20","+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){g=null,h.last&&(h.el.trigger("longTap"),h={})}function e(){g&&clearTimeout(g),g=null}var f,g,h={},i=750;a(document).ready(function(){var j,k;a(document.body).bind("touchstart",function(c){j=Date.now(),k=j-(h.last||j),h.el=a(b(c.touches[0].target)),f&&clearTimeout(f),h.x1=c.touches[0].pageX,h.y1=c.touches[0].pageY,k>0&&250>=k&&(h.isDoubleTap=!0),h.last=j,g=setTimeout(d,i)}).bind("touchmove",function(a){e(),h.x2=a.touches[0].pageX,h.y2=a.touches[0].pageY}).bind("touchend",function(){e(),h.isDoubleTap?(h.el.trigger("doubleTap"),h={}):h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?(h.el.trigger("swipe")&&h.el.trigger("swipe"+c(h.x1,h.x2,h.y1,h.y2)),h={}):"last"in h&&(h.el.trigger("tap"),f=setTimeout(function(){f=null,h.el.trigger("singleTap"),h={}},250))}).bind("touchcancel",function(){f&&clearTimeout(f),g&&clearTimeout(g),g=f=null,h={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto);var __indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;return i=Math.max,j=Math.min,c=Math.floor,n=Math.round,h={},h.rgba=m=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=1),e="\\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3})",f=new RegExp("^rgb"+e+"\\)$"),g=new RegExp("^rgba"+e+"\\,[\\.0-9]+\\)$"),a=a.toLowerCase().replace(/\s/g,""),/^\#[0-9a-fA-F]{3}$/.test(a)){for(c="#",d=1;4>d;)c+=a.substr(d,1)+a.substr(d,1),d++;a=c}if(f.test(a)?c=a.match(f):g.test(a)&&(c=a.match(g)),c)for(a="#",d=1;4>d;)h=parseInt(c[d],10),a+=(16>h?"0":"")+h.toString(16),d++;if(/^\#[0-9a-fA-F]{6}$/.test(a)){for(c="rgba(",d=1;7>d;)c+=parseInt(a.substr(d,2),16)+",",d+=2;a=c+b+")"}else a="rgba(0,0,0,1)";return a},h.inverse=g=function(a){var c;return a?(c=d(a),b(c.map(function(a){return 255-a}))):void 0},h.hsv2rgb=e=function(a){var b,e,f,g,h,i,j,k,l;if("string"==typeof a&&(a=d(a)),i=a[0]/360,k=a[1]/100,l=a[2]/100,k>0){switch(i>=1&&(i=0),i=6*i,g=i-c(i),b=n(255*l*(1-k)),e=n(255*l*(1-k*g)),f=n(255*l*(1-k*(1-g))),l=n(255*l),c(i)){case 0:j=l,h=f,e=b;break;case 1:j=e,h=l,e=b;break;case 2:j=b,h=l,e=f;break;case 3:j=b,h=e,e=l;break;case 4:j=f,h=b,e=l;break;case 5:j=l,h=b,e=e}return[j?j:0,h?h:0,e?e:0]}return[l=n(255*l),l,l]},h.rgb2Array=k=function(a){var b,c,d,e,f,g;if(a=a.replace(/\s/g,""),d="\\(([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3})",e=new RegExp("^rgb"+d+"\\)$"),f=new RegExp("^rgba"+d+"\\,[\\.0-9]+\\)$"),e.test(a)?b=a.match(e):f.test(a)&&(b=a.match(f)),b){for(a="#",c=1;4>c;)g=parseInt(b[c],10),a+=(16>g?"0":"")+g.toString(16),c++;return a}return null},h.hexToArray=d=function(a){return/^rgb/i.test(a)?d(k(a)):/[a-f\d]{2}/gi.test(a)?a.match(/[a-f\d]{2}/gi).map(function(a){return parseInt(a,16)}):a},h.rgb2hsv=l=function(a){var b,c,e,f;return"string"==typeof a&&(a=d(a)),f=i(a[0],a[1],a[2]),e=f-j(a[0],a[1],a[2]),0!==f?(c=n(100*(e/f)),a[0]===f?b=(a[1]-a[2])/e:a[1]===f?b=2+(a[2]-a[0])/e:a[2]===f&&(b=4+(a[0]-a[1])/e),b=j(n(60*b),360),0>b&&(b+=360),[b?b:0,c?c:0,n(100*(f/255))]):[0,0,0]},h.arrayToHex=b=function(a){return"#"+a.map(function(a){return("0"+a.toString(16)).slice(-2)}).join("")},h.lighten=function(a,c){return c=c.toString(),c=/\./.test(c)?parseFloat(c):parseFloat(c)/100,a instanceof Array||(a=d(a)),b(a.map(function(a){return j(255,n(a+255*c))}))},h.darken=function(a,c){return c=c.toString(),c=/\./.test(c)?parseFloat(c):parseFloat(c)/100,a instanceof Array||(a=d(a)),b(a.map(function(a){return j(255,n(a*c))}))},f=function(a){return a=i(0,j(255,a)),360*a/255},a=function(a){for(;0>a;)a+=360;return a%=360,n(255*a/360)},h.rotateColor=function(c,d){var g,h;return h=l(c),g=h[0],h[0]=a(d+f(g)),b(e(h))},window.FG={libColors:h},h}(),function(){var a,b,c,d,e,f,g,h;for(c=window.FG.libColors,a={},e=Math.min,d=Math.max,f=Math.round,a.Draw=function(){function a(a){this.canvas=a,this._objectsCanBeDrawn=["point","circle","gapedCircle","sector","arc","line","rotatedLine","gradientLine","text","rectangle","rect","triangle","polygon","bezier","bezierPolygon","qcurve","bricksEqualizer","circlesEqualizer","textOnArc"],this.ctx=this.canvas.getContext("2d")}return a.prototype.makeFontString=function(a){switch(typeof a){case"object":return[a.style||"",a.variant||"normal",(a.size?""+a.size+(a.units||"px"):"")||"12px",a.face||a.family||"sans serif"].join(" ");case"string":return a;default:return""}},a.prototype.resize=function(a,b){return this.canvas.width=a,this.canvas.height=b},a.prototype._setStyle=function(a){return this.ctx.strokeStyle=a.color,this.ctx.fillStyle=null!=a.fill?a.fill:a.color,this.ctx.lineWidth="undefined"==typeof a.lineWidth?1:a.lineWidth,this.ctx.lineCap="undefined"==typeof a.lineCap?"round":a.lineCap,a.shadow?(this.ctx.shadowOffsetX="undefined"==typeof a.shadow.x?2:a.shadow.x,this.ctx.shadowOffsetY="undefined"==typeof a.shadow.y?3:a.shadow.y,this.ctx.shadowColor=a.shadow.color||"black",this.ctx.shadowBlur="undefined"==typeof a.shadow.blur?10:a.shadow.blur):void 0},a.prototype.drawArrow=function(a,b,c,d){var e,f;return e=Math.PI/2+Math.atan2(a.x-b.x,a.y-b.y),f=d*Math.PI/180,this.ctx.save(),this.ctx.lineJoin="miter",this.ctx.translate(a.x,a.y),this.ctx.rotate(f-e),this.ctx.moveTo(c,0),this.ctx.lineTo(0,0),this.ctx.rotate(-2*f),this.ctx.lineTo(c+1,0),this.ctx.lineTo(0,0),this.ctx.stroke(),this.ctx.restore()},a.prototype.measureText=function(a,b){var c;return this.ctx.save(),this.ctx.font=a,c=this.ctx.measureText(b).width,this.ctx.restore(),c},a.prototype._drawArrows=function(a,b){var c,d;if(d="number"==typeof a.arrowLen?a.arrowLen:10,c=15,this.ctx.fillStyle=a.color,"arrow"===a.startStyle)switch(b){case"line":this.drawArrow(a.start,a.end,d,c);break;case"bezier":this.drawArrow(a.start,a.cp1,d,c);break;case"qcurve":this.drawArrow(a.start,a.cp,d,c)}if("arrow"===a.endStyle)switch(b){case"line":return this.drawArrow(a.end,a.start,d,c);case"bezier":return this.drawArrow(a.end,a.cp2,d,c);case"qcurve":return this.drawArrow(a.end,a.cp,d,c)}},a.prototype.getContext=function(){return this.ctx},a.prototype.getSize=function(){return{width:this.canvas.width,height:this.canvas.height}},a.prototype.point=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(a.x+1,a.y+1),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},a.prototype.circle=function(a){return a.radius<1?void 0:(this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.arc(a.center.x,a.center.y,a.radius,0,2*Math.PI,!0),this.ctx.closePath(),"string"==typeof a.fill?this.ctx.fill():this.ctx.stroke(),this.ctx.restore())},a.prototype.gapedCircle=function(a){var b,c,d,e,f,g,h,i;return this.ctx.save(),b=a.gapSize||3,c=a.gapStep||5,e=a.center.x,g=e-c/2,h=e+c/2,f=a.center.x+a.radius,i=a.center.y-a.radius,this.ctx.fillStyle="rgba(0,0,0,1)",this.ctx.rect(h,i,b,2*a.radius),this.ctx.fill(),d=this.ctx.globalCompositeOperation,this.ctx.globalCompositeOperation="destination-out",this._setStyle(a),this.ctx.beginPath(),this.ctx.arc(a.center.x,a.center.y,a.radius,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.globalCompositeOperation=d,this.ctx.restore()},a.prototype.sector=function(a){var b,c,d,e,f,g,h,i,j,k;return this.ctx.save(),this._setStyle(a),d=a.rotate||0,e=-(a.startAngle+d)*Math.PI/180,b=-(a.endAngle+d)*Math.PI/180,f=a.center.x,i=a.center.y,c=a.radius,g=f+c*Math.cos(e),j=i+c*Math.sin(e),h=f+c*Math.cos(b),k=i+c*Math.sin(b),this.ctx.beginPath(),this.ctx.moveTo(f,i),this.ctx.lineTo(g,j),this.ctx.arc(f,i,c,e,b,a.clockwise?!1:!0),this.ctx.lineTo(h,k),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()},a.prototype.arc=function(a){var b,c,d,e;if(!(a.radius<1)){d=a.rotate||0,e=-(a.startAngle+d)*Math.PI/180,c=-(a.endAngle+d)*Math.PI/180,this.ctx.save(),this._setStyle(a),this.ctx.beginPath();try{this.ctx.arc(a.center.x,a.center.y,a.radius,e,c,a.clockwise?!1:!0)}catch(f){b=f,console.log("error in "+JSON.stringify(a,null,2))}return this.ctx.stroke(),this.ctx.restore()}},a.prototype.line=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.start.x,a.start.y),this.ctx.lineTo(a.end.x,a.end.y),this._drawArrows(a,"line"),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},a.prototype.rotatedLine=function(a){return this.ctx.save(),this._setStyle(a),"number"==typeof a.rotateAngle&&(this.ctx.translate(a.center.x,a.center.y),this.ctx.rotate(a.rotateAngle*Math.PI/180)),this.ctx.beginPath(),this.ctx.moveTo(a.start.x,a.start.y),this.ctx.lineTo(a.end.x,a.end.y),this._drawArrows(a,"line"),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()},a.prototype.gradientLine=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.strokeStyle=this.createLinearGradient(a.coords||a,a.color),this.ctx.beginPath(),this.ctx.moveTo(a.start.x,a.start.y),this.ctx.lineTo(a.end.x,a.end.y),this.ctx.stroke(),this.ctx.restore()},a.prototype.text=function(a){var b,c;return this.ctx.save(),this.ctx.font=this.makeFontString(a.font),this._setStyle(a),"number"==typeof a.offset.x2?(b=this.measureText(a.font,a.text),c=(a.offset.x2-a.offset.x-b)/2,0>c&&(c=c/2-1)):c=0,a.rotate&&this.ctx.rotate(a.rotate*Math.PI/180),this.ctx.fillText(a.text,a.offset.x+c,a.offset.y),this.ctx.restore()},a.prototype.textOnArc=function(a){var b,c,d,e,f,g,h;for(b=a.angle*Math.PI/180,e=a.startAngle*Math.PI/180,this.ctx.save(),this.ctx.font=makeFontString(a.font),this._setStyle(a),this.ctx.translate(a.center.x,a.center.y),this.ctx.rotate(e),this.ctx.rotate(-1*(b/a.text.length)/2),h=a.text,d=f=0,g=h.length;g>f;d=++f)c=h[d],this.ctx.rotate(b/a.text.length),this.ctx.save(),this.ctx.translate(0,-1*a.radius),this.ctx.fillText(c,0,0),this.ctx.restore();return this.ctx.restore()},a.prototype.pointsEqualizer=function(a){var b,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this;for(p=f(e(a.p1.x,a.p2.x)),q=f(d(a.p1.x,a.p2.x)),s=f(e(a.p1.y,a.p2.y)),t=f(d(a.p1.y,a.p2.y)),g=c.rgb2hsv(a.color),b=a.color,a.start={},a.end={},m=1,n=a.size||4*m,k=a.gap||2*m,h=a.direction||"top",l=d(1,e(100,"number"==typeof a.persent?a.persent:100)),j=function(a){return u.ctx.moveTo(a,s),u.ctx.lineTo(a,t),u.ctx.stroke()},i=function(a){return u.ctx.moveTo(p,a),u.ctx.lineTo(q,a),u.ctx.stroke()},this.ctx.save(),this._setStyle(a),this.ctx.lineWidth=1,a.start=a.p1,a.end=a.p2,a.color="#000",this.rectangle(a),o=p+1;q-2>o;)j(o),o+=3;for(o=p,r=s+1;t-2>r;)i(r),r+=3;return this.ctx.restore()},a.prototype.be=function(a){var b,g,h,i,j,k,l,m,n,o,p,q,r;for(m=e(a.p1.x,a.p2.x),n=d(a.p1.x,a.p2.x),q=e(a.p1.y,a.p2.y),p=d(a.p1.y,a.p2.y),g=c.rgb2hsv(a.color),b=a.color,h=p-q,k=(a.persent||100)/100,q=f(p-h*k),l=a.size||10,j=a.gap||4,i=a.fill||b,a.fageColor&&(i=""+c.arrayToHex(c.hsv2rgb([g[0],f(k*g[1]),g[2]]))),o=p,r=[];o>q;)this.rectangle({start:{x:m,y:o},end:{x:n,y:o+l},color:b,fill:i}),r.push(o-=l+j);return r},a.prototype.bricksEqualizer=function(a){var b,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;switch(p=e(a.p1.x,a.p2.x),q=d(a.p1.x,a.p2.x),r=e(a.p1.y,a.p2.y),s=d(a.p1.y,a.p2.y),i=c.rgb2hsv(a.color),h=a.color,a.start={},a.end={},n=a.size||10,l=a.gap||4,k=a.direction||"top",m=d(1,e(100,"number"==typeof a.persent?a.persent:100)),k){case"top":for(g=f(r+(s-r)*(1-m/100)),t=[];s>g;)a.start.x=p,a.end.x=q,a.end.y=s,s-=n,a.start.y=d(g,s),s-=l,a.type="rectangle",a.fadeColor&&(a.fill=""+c.arrayToHex(c.hsv2rgb([i[0],f(m*i[1]/100),i[2]]))),j=p-q,o=p+3,t.push(function(){var b;for(b=[];q>o;)a.start.x=o,a.end.x=o+2,this.rectangle(a),b.push(o+=3);return b}.call(this));return t;case"bottom":for(g=f(r+(s-r)*(m/100)),u=[];g>r;)a.start.x=p,a.end.x=q,a.start.y=r,r+=n,a.end.y=e(g,r),r+=l,a.type="rectangle",a.fadeColor&&(a.fill=c.arrayToHex(c.hsv2rgb([i[0],m*i[1]/100,i[2]]))),u.push(this.rectangle(a));return u;case"left":for(b=f(p+(q-p)*(m/100)),v=[];b>p;)a.start.y=r,a.end.y=s,a.start.x=p,p+=n,a.end.x=e(b,p),p+=l,a.type="rectangle",a.fadeColor&&(a.fill=c.arrayToHex(c.hsv2rgb([i[0],m*i[1]/100,i[2]]))),v.push(this.rectangle(a));return v}},a.prototype.circlesEqualizer=function(a){var b,c,f,g,h,i,j,k,l,m,n,o,p,q;switch(l=e(a.p1.x,a.p2.x),m=d(a.p1.x,a.p2.x),n=e(a.p1.y,a.p2.y),o=d(a.p1.y,a.p2.y),k=a.size||10,f=a.gap||4,c=a.direction||"top",h=d(1,e(100,"number"==typeof a.persent?a.persent:100)),g=a.padding||1,b=a.color,h=d(1,e(100,"number"==typeof a.persent?a.persent:100)),j=[],c){case"top":for(i=m-l-g,q=o-2*(g+i);q>n;)j.push({type:"circle",radius:i,center:{x:l+i/2,y:q+g+i},color:b,fill:b}),q-=2*(g+i);if(this.multiDraw(j),n-q>g+i)return this.sector({radius:i,center:{x:l+i/2,y:q+g+i},startAngle:0,endAngle:180,clockwise:!0,color:b,fill:b});break;case"left":for(i=(o-n-g)/2,m=l+(m-l)*h/100,p=l+2*(g+i);m>p;)j.push({type:"circle",radius:i,center:{x:p-g-i,y:n+g+i},color:b,fill:b}),p+=2*(g+i);if(this.multiDraw(j),g+i>p-m)return this.sector({radius:i,center:{x:p-i/2-2*g,y:n+g+i},color:b,fill:b,startAngle:90,endAngle:270})}},a.prototype.rectangle=function(a){var b,c,d;return d=a.start,b=a.end,this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),"number"==typeof a.radius?(c=a.radius,this.ctx.moveTo(d.x+c,d.y),this.ctx.lineTo(b.x-c,d.y),this.ctx.arc(b.x-c,d.y+c,c,-Math.PI/2,0,!1),this.ctx.lineTo(b.x,b.y-c),this.ctx.arc(b.x-c,b.y-c,c,0,Math.PI/2,!1),this.ctx.lineTo(d.x+c,b.y),this.ctx.arc(d.x+c,b.y-c,c,Math.PI/2,Math.PI,!1),this.ctx.lineTo(d.x,d.y+c),this.ctx.arc(d.x+c,d.y+c,c,Math.PI,-Math.PI/2,!1)):(this.ctx.moveTo(d.x,d.y),this.ctx.lineTo(b.x,d.y),this.ctx.lineTo(b.x,b.y),this.ctx.lineTo(d.x,b.y),this.ctx.lineTo(d.x,d.y)),this.ctx.closePath(),"string"==typeof a.fill&&this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()},a.prototype.rect=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.rect(a.start.x,a.start.y,a.width,a.height),a.fill&&this.ctx.fill(),this.ctx.restore()},a.prototype.triangle=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.p1.x,a.p1.y),this.ctx.lineTo(a.p2.x,a.p2.y),this.ctx.lineTo(a.p3.x,a.p3.y),this.ctx.lineTo(a.p1.x,a.p1.y),this.ctx.closePath(),"string"==typeof a.fill?this.ctx.fill():this.ctx.stroke(),this.ctx.restore()},a.prototype.polygon=function(a){var b;for(this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.points[0][0],a.points[0][1]),b=1;b<a.points.length;)this.ctx.lineTo(a.points[b][0],a.points[b][1]),b++;return a.open||this.ctx.closePath(),"string"!=typeof a.fill?this.ctx.stroke():this.ctx.fill(),this.ctx.restore()},a.prototype.bezierPolygon=function(a){var b,c,d,e,f;for(this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),f=a.values,c=d=0,e=f.length;e>d;c=++d)b=f[c],0===c&&this.ctx.moveTo(b.start.x,b.start.y),this.ctx.bezierCurveTo(b.cp1.x,b.cp1.y,b.cp2.x,b.cp2.y,b.end.x,b.end.y);return a.fill?this.ctx.fill():this.ctx.stroke(),this._drawArrows(a,"bezier"),this.ctx.restore()},a.prototype.bezier=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.start.x,a.start.y),this.ctx.bezierCurveTo(a.cp1.x,a.cp1.y,a.cp2.x,a.cp2.y,a.end.x,a.end.y),this.ctx.stroke(),this._drawArrows(a,"bezier"),this.ctx.restore()},a.prototype.qcurve=function(a){return this.ctx.save(),this._setStyle(a),this.ctx.beginPath(),this.ctx.moveTo(a.start.x,a.start.y),this.ctx.quadraticCurveTo(a.cp.x,a.cp.y,a.end.x,a.end.y),this.ctx.stroke(),this._drawArrows(a,"qcurve"),this.ctx.restore()},a.prototype.drawObject=function(a){var b;return null==a&&(a={}),a&&(b=a.type,__indexOf.call(this._objectsCanBeDrawn,b)>=0)?this[a.type](a):void 0},a.prototype.multiDraw=function(a){var b,c,d,e,f,g,h;for(b=a.shift(),this.drawObject(b),h=[],f=0,g=a.length;g>f;f++){d=a[f];for(c in d)e=d[c],b[c]=e;h.push(this.drawObject(b))}return h},a.prototype.leftBrace=function(a){var b,c,f,g,h,i,j,k,l,m;return null==a&&(a={}),i=d(0,e(100,a.persent||1)),m=a.lineWidth||2,b=a.arcRadius||5*m,c=a.color||"#226701",g=a.start.x||2*m,h=a.start.y||2*m,f=a.height||20*m,j=Math.round(100*(f-2*b)/f),k=[],l=i/(100-j),i>100-j&&(k.push({type:"arc",color:c,center:{x:g+b,y:h+b-1},radius:b,startAngle:180,endAngle:180-90/j*(j-(100-i)),lineWidth:m,clockwise:!0}),k.push({color:c,center:{x:g+b,y:h+f-b+1},startAngle:180,endAngle:parseInt(180+90/j*(j-(100-i))),lineWidth:m,clockwise:!1}),l=1),k.push({type:"line",color:c,start:{x:g,y:h+b},end:{x:g,y:h+f-b},lineWidth:m}),this.multiDraw(k)},a.prototype.clear=function(a){return null==a&&(a={start:{x:0,y:0},width:this.canvas.width,height:this.canvas.height}),this.ctx.clearRect(a.start.x,a.start.y,a.width,a.height)},a.prototype.rotate=function(a){return this.ctx.rotate(Math.sin(a*Math.PI/180))},a.prototype.createLinearGradient=function(a,b){var c,d,e,f;for(null==b&&(b=[[0,"#000"],[1,"#fff"]]),d=this.ctx.createLinearGradient(a.start.x,a.start.y,a.end.x,a.end.y),e=0,f=b.length;f>e;e++)c=b[e],d.addColorStop(c[0],c[1]);return d},a.prototype.createRadialGradient=function(a,b,c){var d,e,f,g;for(e=this.ctx.createRadialGradient(a.center.x,a.center.y,a.radius.start,a.end.x,a.end.y,a.radius.end),d=1/b.length,g=0,f=0;f<b.length;)g="undefined"==typeof c?g+d:c[f],e.addColorStop(g,b[f]),f++;return e.addColorStop(1,"rgba(0,0,0,0)"),e},a}(),a.gradients={},a.gradients.Linear=function(a,b,c,d){var e,f,g,h;for(f=a.createLinearGradient(b.start.x,b.start.y,b.stop.x,b.stop.y),e=1/c.length,h=0,g=0;g<c.length;)h="undefined"==typeof d?h+e:d[g],f.addColorStop(h,c[g]),g++;return f},a.gradients.Radial=function(a,b,c,d){var e,f,g,h;for(f=a.createRadialGradient(b.center.x,b.center.y,b.radius.start,b.end.x,b.end.y,b.radius.end),e=1/c.length,h=e/2,g=0;g<c.length;)h="undefined"==typeof d?h+e:d[g],f.addColorStop(h,c[g]),g++;return f.addColorStop(1,"rgba(0,0,0,0)"),f},a.shapes={},a.shapes.Shape=function(a){return this.color="white",this.zIndex=1,this.fillStyle="none",this.lineWidth=1,this.scale=1,this.lineCap="round",this.offset={x:0,y:0},this.context=!1,m.h.safeExtend(this,a),this.gradientPoints=[],this.gradientColors=[],this.context?this.draw(this.context):void 0},a.AnimationCanvas=function(a){function b(a,c){null==c&&(c={}),b.__super__.constructor.call(this,a),this._redrawEnabled=!0,this._redrawFrameFns=[],this.redraw()}return __extends(b,a),b.prototype.endbleRedraw=function(){return this._redrawEnabled=!0,this.redraw()},b.prototype.disableRedraw=function(){return this._redrawEnabled=!1},b.prototype.dropFrames=function(){return this._redrawFrameFns=[]},b.prototype.addRedrawFrame=function(a){var b,c,d,e;for(e=this._redrawFrameFns,c=0,d=e.length;d>c;c++)if(b=e[c],b===a)return;return this._redrawFrameFns.push(a)},b.prototype.redraw=function(){var a,b,c,d,e=this;if(this._redrawEnabled)for(this.clear(),d=this._redrawFrameFns,b=0,c=d.length;c>b;b++)a=d[b],a.call(this);return window.requestAnimationFrame(function(){return e.redraw()})},b}(a.Draw),b=0,g=["ms","moz","webkit","o"],h=0;h<g.length&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[g[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[g[h]+"CancelAnimationFrame"]||window[g[h]+"CancelRequestAnimationFrame"],++h;return window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var c,d,e;return c=(new Date).getTime(),e=Math.max(0,16-(c-b)),d=window.setTimeout(function(){return a(c+e)},e),b=c+e,d}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){return clearTimeout(a)}),window.FG.draw=a,a}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;return o=window.FG,h=o.libColors,d=o.draw,window.FG._fgData={},i=Math.max,j=Math.min,b=Math.abs,n=Math.sin,c=Math.cos,a=Math.PI,f=Math.floor,m=Math.round,e={},g=function(a){var b,c;for(null==a&&(a=new Date),c=a.getMonth(),b=[],a.setDate(1);1!==a.getDay();)a.setDate(a.getDate()+1);for(;a.getMonth()===c;)b.push(new Date(a.getTime())),a.setDate(a.getDate()+7);return b},e.removeObject=l=function(a){var b;return null!=(null!=(b=window.FG._fgData[a])?b.destroy:void 0)?window.FG._fgData[a].destroy():void 0},$(window).on("resize orientationchange",function(){var a,b,c;b=window.FG._fgData,c=[];for(a in b)e=b[a],c.push(e.resizeCanvas());return c}),e.createObject=function(a,b){var c,d,f;return f=$(a).data("json-id"),f||(f="fg-"+Date.now(),$(a).data("json-id",f)),l(f),null!=window.FG._fgData[f]&&"function"==typeof window.FG._fgData[f].destroy&&(window.FG._fgData[f].destroy(),delete window.FG._fgData[f]),null==e[b.type]?(console.warn("unknown type: "+b.type),null):(d=new e[b.type](a,b),window.FG._fgData[f]=d,null!=b.redraw&&(c=setInterval(function(){var a;return null==window.FG._fgData[f]?clearTimeout(c):(d.redraw(),null!=d.optsArray?(a=d.optsArray.shift(),d.optsArray.push(a),d.updateOptions(a)):void 0)},b.redraw)),d.redraw(),d)},k=function(a,b){var c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t;for(null==b&&(b={}),g=[],c=[],t=[j.apply(this,a),i.apply(this,a)],s=t[0],p=t[1],q=a.indexOf(p),"number"==typeof b.maxValue&&(p=b.maxValue),"number"==typeof b.minValue&&(s=b.minValue),r=a.reduce(function(a,b){return a+b}),l=0,n=a.length;n>l;l++)h=a[l],g.push(100*h/p);for(e=0,f=b.minAngleValue||2,a.map(function(a){return f>360*(a/r)?e+=f/360:void 0}),d=m=0,o=a.length;o>m;d=++m)h=a[d],k=h/r,d===q&&(k-=e),f>360*k&&(k=f/360),c.push(k);return{regularNormalized:g,circleNormalized:c,_maxIndex:q,_max:p,_min:s}},e.Digit=function(){function a(a,b){this.canvas=a,null==b&&(b={}),this.draw=new d.Draw($(this.canvas).get(0)),this.value="undefined"==typeof b.value?b.value:b.value,this.font=b.font||{size:20,family:"Helvetica"},this.color=b.color||"#ff0",b.h&&(/^\d+(|\.|\.\d+)\%$/.test(b.h)?(this._hpers=b.h,$(this.canvas).css({height:this._hpers}),this._h=$(this.canvas).offset().height):this._h=b.h,$(this.canvas).get(0).height=this._h,$(this.canvas).css({height:"auto"})),b.w&&(/^\d+(|\.|\.\d+)\%$/.test(b.w)?(this._wpers=b.w,$(this.canvas).css({width:this._wpers}),this._w=$(this.canvas).offset().width):this._w=b.w,$(this.canvas).get(0).width=this._w,$(this.canvas).css({width:"auto"}))}return a.prototype.redraw=function(){var a;for(this.draw.clear(),this.font.size=this._h,this.draw.ctx.globalCompositeOperation="destignation-in",this.draw.text({font:this.font,text:this.value,fill:this.color,offset:{x:0,y:this._h-3,x2:this._w}}),a=0;a<this._h;)this.draw.rect({start:{x:0,y:a},width:this._w,height:1,fill:"yellow",lineHeight:2}),a+=2;return this.draw.ctx.globalCompositeOperation="source-over"},a}(),e.Graph=function(){function a(a,b){this.canvas=a,null==b&&(b={}),this.optsArray||(this.optsArray=b.optsArray),this.updateOptions(b)}return a.prototype.updateOptions=function(a){var b;return null==a&&(a={}),this._drawGrid="undefined"==typeof a.drawGrid?!1:!!a.drawGrid,this._signsAfterDot="number"==typeof a.signsAfterDot?a.signsAfterDot:0,this._showLegend="undefined"==typeof a.showLegend?!1:!!a.showLegend,this._showAxisValues="undefined"==typeof a.showAxisValues?!0:!!a.showAxisValues,this._showAxis="undefined"==typeof a.showAxis?!0:!!a.showAxis,this._showMax="undefined"==typeof a.showMax?!0:!!a.showMax,this._showRestValues="undefined"==typeof a.showRestValues?!1:!!a.showRestValues,this._riskColor=a.riskColor||h.rgba("#888",.6),this._riskFont=a.riskFont||{size:.4,units:"em",family:"a_LCDNova, Helvetica"},this._riskSize="number"==typeof a.riskSize?a.riskSize:5,this._legendAppears=a.legendAppears||"top-right",this._legendMarker=a.legendMarker||"◉ ",this._legendEdgeOffset=a.legendOffset?a.legendOffset:4,this._onGraphFont=a.onGraphFont||{size:1,units:"em",family:"a_LCDNova, Helvetica"},this._legendFont=a.legendFont||{size:.7,units:"em",family:"a_LCDNova, Helvetica",variant:"small-caps"},this.signatures=a.signatures||[],this.draw=new d.Draw($(this.canvas).get(0)),this.colors=a.colors||["#03f39A","#493ff9","#226a91"],this._redrawTime=a.redrawTime||1200,this._timeBeforeRedraw=a.redraw||864e5,this._lastRedraw=-1,this._waitTime=a.waitTime||3e3,this._preventTouch="boolean"==typeof a.preventTouch?a.preventTouch:!0,this._showFancyAnimation=!1,this._hoverAction="boolean"==typeof a.hoverAction?a.hoverAction:!0,this.graphType=a.graphType||"rect",this._axisColor=a.axisColor||h.rgba("#777777"),this._showNet="boolean"==typeof a.showNet?a.showNet:!1,this._withZero="boolean"==typeof a.withZero?a.withZero:!1,this._notesInsideGraph="boolean"==typeof a.notesInsideGraph?a.notesInsideGraph:!1,this._overflowPart=a.overflowY||1.2,this._clearOnNewFrame="boolean"==typeof a.clearOnNewFrame?a.clearOnNewFrame:!0,this._netOpacity=a.netOpacity||.15,this._verticalSections=a.verticalSections||3,this._netLineWidth=a.netLineWidth||1,this._lineWidth=a.lineWidth||2,this._graphBgColor=a.bgColor||"transparent",this._barCharts="boolean"==typeof a.barCharts?a.barCharts:!0,this._shadow=a.shadow||null,this._opts=a,this.resizeCanvas(),this.setPaddings(a.paddings),this._setupEvents(),this._minYValue=a.minValue||10,this._maxYValue=a.maxValue||1e3,this._datasetMaxValue=a.dsMaxValue||null,this._changeCanvas(a.needRedraw),this._legendStrings=a.legends||[],this.newLegends(),this.newData(a.data),this._drawTime=a.drawTime||1e3,null!=(null!=(b=a.gradient)?b.persent:void 0)?this._gradientPersent=a.gradient.persent:null!=a.gradient?this._gradientPersent=40:void 0},a.prototype.resizeCanvas=function(){var a,b;return this._opts.parentSize?($(this.canvas).hide(),a=$(this.canvas).parent(),a.css({"text-align":"left"}),b=a.offset(),$(this.canvas).attr("height",b.height).attr("width",b.width),$(this.canvas).css({width:"auto",height:"auto"}),$(this.canvas).show(),this._h=b.height):(this._opts.w&&(/^\d+(|\.|\.\d+)\%$/.test(this._opts.w)?(this._wpers=this._opts.w,$(this.canvas).css({width:this._wpers}),this._w=$(this.canvas).offset().width):this._w=this._opts.w,$(this.canvas).get(0).width=this._w,$(this.canvas).css({width:"auto"})),this._opts.ratio?(this._ratio=this._opts.ratio,this._h=this._w/this._ratio,$(this.canvas).get(0).height=this._h,$(this.canvas).css({height:"auto"})):this._opts.h?(/^\d+(|\.|\.\d+)\%$/.test(this._opts.h)?(this._hpers=this._opts.h,$(this.canvas).css({height:this._hpers}),this._h=$(this.canvas).offset().height):this._h=this._opts.h,$(this.canvas).get(0).height=this._h,$(this.canvas).css({height:"auto"})):void 0)},a.prototype.newLegends=function(a,b){var c,d,e,f,g;for(null==a&&(a=this._legendStrings),null==b&&(b=this.colors),this._legends=[],g=[],c=e=0,f=a.length;f>e;c=++e)d=a[c],b[c]?g.push(this._legends.push({color:b[c],legend:d})):g.push(void 0);return g},a.prototype.doDrawGrid=function(){var a,b,c,d,e,f,g,i,j,k,l,m,n;for(l=[this.w,this.h],f=l[0],c=l[1],m=[0,0],i=m[0],k=m[1],n=[0,0],g=n[0],j=n[1],d=[],a=h.rgba("#d144ff",.1),b=h.rgba("#9d00ee",.1),e=4;c>j;)d.push({type:"line",start:{x:i,y:j},end:{x:f,y:j},lineWidth:1,color:a,fill:a}),j+=e;for(;f>g;)d.push({type:"line",start:{x:g,y:k},end:{x:g,y:c},lineWidth:1,color:b,fill:b}),g+=e;return this.draw.multiDraw(d)},a.prototype._afterRedraw=function(){var a=this;return this._showLegend&&!this._pointerOnCanvas&&this._doDrawLegend(),this._showAxisValues&&this._doShowAxisValues(),this._drawGrid&&this.doDrawGrid(),this._overflow?setTimeout(function(){return a._drawFancyAnimation()},this._waitTime):(this._showFancyAnimation=!1,window.requestAnimationFrame(function(){return a._doRedraw()}))},a.prototype._drawFancyAnimation=function(){return this._showFancyAnimation=!0},a.prototype._toggleLegend=function(a){return a.stopPropagation(),a.preventDefault(),this._showLegend=!this._showLegend,this._changeCanvas(!0)},a.prototype._toggleAxisValues=function(){return this._showAxisValues=!this._showAxisValues},a.prototype._doShowAxisValues=function(){var a,b,c,d,e,f,g;if(d=this._getGraphYAxisValues()){for(b=this.draw.makeFontString(this._riskFont),a=(this.h-this.paddings._h)/this._verticalSections,e=this.h-this.paddings.bottom+this._riskFont.size/2,f=0,g=d.length;g>f;f++)c=d[f],this.draw.text({font:b,text:c,fill:this._riskColor,offset:{x:2,y:e,x2:this.paddings.left}}),e-=a;if(this._withZero)return this.draw.text({font:b,text:"0",fill:this._riskColor,offset:{x:2,y:this._aboveZero+this._riskFont.size/2,x2:this.paddings.left}})}},a.prototype._getGraphYAxisValues=function(){var a,b,c,d,e;if(null!=this.data.values){for(e=this._min<0?this._min*this._overflowPart:0,a=this._max*this._overflowPart-e,b=a/this._verticalSections,d=e,c=[d];d<this._max*this._overflowPart;)d+=b,c.push(d);return c=c.sort(function(a,b){return a-b}),this._formatY(c)}return null},a.prototype._formatY=function(a){var b=this;return a.map(function(a){var c,d;for(0>a?(d="-",a=-a):d="",a=parseFloat(a.toFixed(4)),c=0;a>1e3;)a=parseFloat((a/1e3).toFixed(4)),c++;return""+d+a.toFixed(b._signsAfterDot)+["","k","M","B"][c]})},a.prototype._doDrawLegend=function(){var a,b,c,d,e,f,g,h,j,k,l,m=this;switch(c=1.2,"small-caps"===this._legendFont.variant&&this._legends.map(function(a){return a.legend=a.legend.toLowerCase()}),b=this.draw.makeFontString(this._legendFont),d=i.apply(this,this._legends.map(function(a){return m.draw.measureText(b,""+m._legendMarker+a.legend)})),g=this._legendFont.size+2,this._legendAppears){case"top-left":case"bottom-left":f=this._netLineWidth+2;break;case"top-right":case"bottom-right":f=this.w-d-this._netLineWidth-this._legendEdgeOffset;break;default:return}for(0===this._legendAppears.indexOf("bottom")&&(g=this._h-this._legends.length*c*this._legendFont.size),this.draw.clear({start:{x:f,y:g-this._legendFont.size+this._lineWidth},width:d,height:c*this._legendFont.size*this._legends.length+this._lineWidth}),k=this._legends,l=[],h=0,j=k.length;j>h;h++)a=k[h],e=""+this._legendMarker+a.legend,this.draw.text({font:this._legendFont,text:e,color:a.color,offset:{x:f,y:g}}),l.push(g+=c*this._legendFont.size);return l},a.prototype._clear=function(){var a,b,c,d;if(b=Date.now()-this._start,this._pers=100*(b/this._redrawTime),this._overflow=this._pers>110,this._pers>100&&(this._pers=100),this._clearOnNewFrame){if(this.draw.clear(),"transparent"!==this._graphBgColor){if(a={start:{x:0,y:0},width:this.w,height:this.h,end:{x:this.w,y:this.h}},this._graphBgColor instanceof Array)switch(d=this._graphBgColor[0]){case"linear":c=this.draw.createLinearGradient(a,this._graphBgColor.slice(1));break;default:c="pink"}else c=this._graphBgColor;a.fill=c,this.draw.rect(a)}if(this._showNet)return this._drawNet()}},a.prototype.setPaddings=function(a){return null==a&&(a={left:10,top:10,right:10,bottom:20}),this._showAxisValues&&(a.left=i(4*this._riskFont.size,a.left)),this.paddings=a,this.paddings._w=this.paddings.left+this.paddings.right,this.paddings._h=this.paddings.top+this.paddings.bottom
},a.prototype._drawAxis=function(a){var b,c,d,e,f,g,h,i;if(null==a&&(a=null),null!=(h=this._drawValues)?h.length:void 0){for(a||(a=this.paddings.left+1),c=[],i=this._drawValues,b=f=0,g=i.length;g>f;b=++f)e=i[b],c.push({type:"line",color:this._axisColor,lineWidth:this._netLineWidth,start:{x:a,y:this.h-this.paddings.bottom},end:{x:a,y:this.h-this.paddings.bottom-this._riskSize}}),null!=this.signatures[b]&&(d={type:"text",color:this._riskColor,lineWidth:this._netLineWidth,offset:{x:a-this._dx,y:this.h-4,x2:a+this._dx},text:this.signatures[b]},c.push(d)),a+=this._dx;return this.draw.multiDraw(c)}},a.prototype._drawNet=function(a,b){var c,d,e,f,g,i,j,k,l,m,n;for(null==a&&(a=this.paddings.left+1),null==b&&(b=this.w-this.paddings._w),g=a,e=[],f=this.h-this.paddings._h,j=k=1,m=this._drawValues.length+(this._barCharts?1:0);m>=1?m>=k:k>=m;j=m>=1?++k:--k)e.push({type:"line",color:h.rgba(this._axisColor,this._netOpacity),lineWidth:this._netLineWidth,start:{x:g,y:this.paddings.top},end:{x:g,y:f+this.paddings.top}}),g+=this._dx;for(g-=this._dx,i=this.paddings.top,c=f/this._verticalSections,d=l=0,n=this._verticalSections;n>=0?n>=l:l>=n;d=n>=0?++l:--l)e.push({start:{x:a-1,y:i},end:{x:g,y:i}}),i+=c;return this._withZero&&(i=this._aboveZero||this.h-this.paddings.bottom,e.push({start:{x:a-1,y:i},end:{x:g,y:i}})),this.draw.multiDraw(e)},a.prototype._changeCanvas=function(a){var b,c,d;return d=($(this.canvas).data("colors")||"").split(","),c=$(this.canvas).css("color"),b=$(this.canvas).get(0),this.w=b.width,this.h=b.height,this._maxYValue=j(this._maxYValue,this.h-this.paddings._h-10),this.newData(),a?this.redraw():void 0},a.prototype._setupEvents=function(){var a,b,c,d=this;return $(this.canvas).on("change",function(){return d._changeCanvas}),"ontouchstart"in window?(a="touchstart",b="touchmove",c="touchend"):(a="mousedown",b="mousemove",c="mouseout",this._preventTouch=!1),$(this.canvas).on(a,function(a){return d._ehTouchStart(a)}),$(this.canvas).on(b,function(a){return d._ehMove(a)}),$(this.canvas).on(c,function(){return d._ehOut()})},a.prototype._moveOnCanvas=function(){},a.prototype._ehTouchStart=function(a){return this._preventTouch&&a.preventDefault(),this._changeCanvas(!0)},a.prototype._ehMove=function(a){var b,c,d,e,f;if(this._preventTouch&&a.preventDefault(),f=$(this.canvas).offset(),c=f.top,b=f.left,d=e=0,"ontouchstart"in window){if(1!==a.touches.length)return;d=a.targetTouches[0].pageX-b,e=a.targetTouches[0].pageY-c}else d=a.pageX-b,e=a.pageY-c;return this._hoverAction?this._moveOnCanvas(100*d/this._w,100*e/this._h):void 0},a.prototype._ehOut=function(){return this._doRedraw()},a.prototype._clearEvents=function(){return $(this.canvas).off()},a.prototype.destroy=function(){return this._clearEvents()},a.prototype._normalize=function(a){var c,d,e,f=this;return c=this._overflowPart*this._max-(this._min<0?this._min*this._overflowPart:0),d=this.h-this.paddings._h,this._aboveZero=d*this._overflowPart*this._max/c,this._subZero=d-this._aboveZero,this._notesInsideGraph&&(this._subZero-=2*this._riskFont.size),e=a.map(function(a){var e;return f._min<0?a>=0?f.paddings.top+(f._aboveZero-a/(f._overflowPart*f._max)*f._aboveZero):f.paddings.top+d-b(f._subZero-a/(f._overflowPart*f._min)*f._subZero):(e=f._maxYValue-a/c*f._maxYValue,e+f.paddings.top)}),this._aboveZero+=this.paddings.top,this._subZero+=this.paddings.top,e},a.prototype.newData=function(a){var b,c;return null==a&&(a=this.data),null!=(null!=a?a.values:void 0)?(b=a.values,this.data=a,c=[j.apply(this,b),i.apply(this,b)],this._min=c[0],this._max=c[1],this._maxIndex=b.indexOf(this._max),null!==this._datasetMaxValue&&(this._max=this._datasetMaxValue),this._drawValues=this._normalize(b)):void 0},a.prototype.redraw=function(){var a;return this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw?(this._lastRedraw=this._start,a=this.w-this.paddings._w,this._dx=this._barCharts?a/this._drawValues.length:a/(this._drawValues.length-1),this._doRedraw()):void 0},a.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i;for(this._clear(),this._drawAxis(),d=this.paddings.left+1,this._gradientPersent&&(b=this._gradientPersent/this._drawValues.length),i=this._drawValues,c=f=0,g=i.length;g>f;c=++f)e=i[c],a=this.colors[c]||this.colors[0],null!=b&&(a=h.lighten(a,parseInt(c*b))),100===this._pers&&this.redrawValue(d,e,h.lighten(a,parseInt(c*b))),this._showMax&&c===this._maxIndex&&this._drawMax(this.data.values[this._maxIndex],d,e,a),this._showRestValues&&c!==this._maxIndex&&this._drawMax(this.data.values[c],d,e,a),this.redrawValue(d,e,a),d+=this._dx;return this._afterRedraw()},a.prototype._drawMax=function(){},a.prototype.normalizeAngle=function(a){return a>360?a%360:0>a?360+a%360:a},a}(),e.PunchCard=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),b.__super__.constructor.call(this,this.canvas,c)}return __extends(b,a),b.prototype.newData=function(a){return null!=(null!=a?a.values:void 0)?(this._drawValues=this._normalize(a.values),this._xLen=this._drawValues[0].length):void 0},b.prototype._normalize=function(a){return this.maxValue=i.apply(this,_.flatten(a)),a},b.prototype.redraw=function(){return this._start=Date.now(),this._max_x=this.w-this.paddings._w,this._max_y=this.h-this.paddings._h,this._stepX=this._max_x/this._xLen,this._stepY=this._max_y/this._drawValues.length,this._maxSize=j.apply(this,[(this._stepY-4)/2,(this._stepY-4)/2,this._lineWidth]),this._doRedraw()},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this._clear(),d=Date.now()-this._start,this._pers=d/this._redrawTime,h=this.paddings.top,a=[],m=this._drawValues,i=0,k=m.length;k>i;i++){for(c=m[i],g=this.paddings.left,j=0,l=c.length;l>j;j++)f=c[j],e=f/this.maxValue,b=this.colors[Math.floor((this.colors.length-1)*e)],a.push({type:"circle",radius:this._pers*e*this._maxSize,center:{x:g+this._stepX/2,y:h+this._stepY/2},color:b,fill:b}),g+=this._stepX;h+=this._stepY}return this.draw.multiDraw(a),this._afterRedraw()},b}(e.Graph),e.VertBars=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),this._barSize=c.barSize||null,this._gap=c.gap||3,this._brickSize=c.brickSize||4,c.withZero=!0,b.__super__.constructor.call(this,this.canvas,c),this._barPadding=c.barPadding}return __extends(b,a),b.prototype._drawMax=function(a,b,c,d){return this._pers>50?this.draw.text({text:a,font:this._onGraphFont,offset:{x:b,y:c*(2*(this._pers-50)/100)-5,x2:b+this._dx},color:d,fill:d}):void 0},b.prototype._drawAxis=function(){var a,b,c,d,e,f,g,h,i,j;if(this._showAxis&&(c=1,null!=(i=this._drawValues)?i.length:void 0)){for(b=[{type:"line",color:this._axisColor,lineWidth:this._netLineWidth,start:{x:this.paddings.left,y:this.h-this.paddings.bottom+c},end:{x:this.w-this.paddings.right,y:this.h-this.paddings.bottom+c}}],e=this.paddings.left+this._dx/2,j=this._drawValues,a=g=0,h=j.length;h>g;a=++g)f=j[a],b.push({type:"line",color:this._axisColor,lineWidth:this._netLineWidth,start:{x:e,y:this.h-this.paddings.bottom+c},end:{x:e,y:this.h-(8+this._riskFont.size)}}),null!=this.signatures[a]&&(d={type:"text",color:this._riskColor,lineWidth:this._netLineWidth,offset:{x:e-this._dx,y:this.h-4,x2:e+this._dx},text:this.signatures[a]},b.push(d)),e+=this._dx;return this.draw.multiDraw(b)}},b.prototype.redrawValue=function(a,b,c,d){var e,f,g,h,i,k,l,m,n,o,p,q;switch(null==d&&(d={}),h="number"==typeof d.persent?d.persent:this._pers,g="number"==typeof this._barPadding?this._barPadding:2,this._barSize&&this._barSize<this._dx?(e=a+this._dx/2,l=e-this._barSize,m=e+this._barSize):(l=a+g,m=a+this._dx-g),n=j(this.h-this.paddings.bottom,b+(100-h)*(this.h-this.paddings.bottom)/100),this._min<0?b<this._aboveZero?(o=this._aboveZero,f=this._aboveZero-b,n=b+f*(100-h)/100):(n=b,p=this._notesInsideGraph?this._subZero:this._aboveZero,o=p,n=o+(b-o)*h/100):o=this.h-this.paddings.bottom,this.graphType){case"equalizer":return this.draw.be({p1:{x:l,y:b},p2:{x:m,y:this.h-this.paddings.bottom},color:c,fill:c,direction:"top",gap:this._gap,size:this._brickSize,persent:h});case"circles":for(i=m-l-g,q=o-2*(g+i),k=[];q>n;)k.push({type:"circle",radius:i,center:{x:l+i/2,y:q+g+i},color:c,fill:c}),q-=2*(g+i);if(this.draw.multiDraw(k),n-q>g+i)return this.draw.sector({radius:i,center:{x:l+i/2,y:q+g+i},startAngle:0,endAngle:180,clockwise:!0,color:c,fill:c});break;default:return this.draw.rectangle({start:{x:l,y:n},end:{x:m,y:o},color:c,fill:c})}},b}(e.Graph),e.HorizBars=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),c.legendAppears="top-right",c.showAxisValues=!1,this._gap="number"==typeof c.gap?c.gap:2,b.__super__.constructor.call(this,this.canvas,c)}return __extends(b,a),b.prototype._normalize=function(a){var b,c,d=this;return b=this.w-this.paddings._w,this._minPxValue=10,c=a.map(function(a){var c;return c=a/d._max*b,d._minPxValue<=c&&b>=c?c:d._minPxValue})},b.prototype._showAxisValues=function(){var a,b,c,d,e,f,g,h;if(c=this._getGraphAxisValues()){for(a=""+(this._riskFont.size||4)+"px "+(this._riskFont.family||Arial),e=this.paddings.top+1+this._riskFont.size,d=0,h=[],f=0,g=c.length;g>f;f++)b=c[f],this.draw.text({font:a,text:b,offset:{x:d,y:e,x2:d+this.paddings.left}}),h.push(e+=this._dy);return h}},b.prototype.redraw=function(){var a;return this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw?(this._lastRedraw=this._start,a=this.h-this.paddings._h,this._dy=this._barCharts?a/this._drawValues.length:a/(this._drawValues.length-1),this._doRedraw()):void 0},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i;for(this._clear(),e=this.paddings.top+1,this._gradientPersent&&(b=this._gradientPersent/this._drawValues.length),a=this.colors[0],i=this._drawValues,c=f=0,g=i.length;g>f;c=++f)d=i[c],null!=b&&(a=h.lighten(a,parseInt(c*b))),this.redrawValue(d,e,a),e+=this._dy;return this._afterRedraw()},b.prototype.redrawValue=function(a,b,c,d){var e,f,g,h;switch(null==d&&(d=2),d=this._gap,e=this.paddings.left,g=b+d,h=b+this._dy-2*d,f=this.paddings.left+a*this._pers/100,this.graphType){case"equalizer":return this.draw.bricksEqualizer({p1:{x:e,y:g},p2:{x:this.paddings.left+a,y:h},direction:"left",gap:1,size:7,persent:this._pers,color:c,fill:c});case"circles":return this.draw.circlesEqualizer({p1:{x:e,y:g},p2:{x:this.paddings.left+a,y:b+8},direction:"left",gap:1,size:7,persent:this._pers,color:c,fill:c});default:return this.draw.rectangle({color:c,fill:c,start:{x:e,y:g},end:{x:f,y:h}})}},b}(e.Graph),e.DiffGraph=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),this._breakColor=c["break"]||h.rgba("#777",.2),b.__super__.constructor.call(this,this.canvas,c),this._showNet="boolean"==typeof c.showNet?c.showNet:!0}return __extends(b,a),b.prototype.newData=function(a){var b,c,d,e,f,g,h,k,l,m,n,o,p,q,r;if((a||this.data)&&(this.data=a||this.data,this.data.values.length>1)){for(g=[],q=this.data.values,k=0,n=q.length;n>k;k++)h=q[k],g.push(h);for(b=_.flatten(this.data.values),r=[i.apply(this,b),j.apply(this,b)],this._max=r[0],this._min=r[1],c=[],this._drawValuesSeq=[],l=0,o=g.length;o>l;l++)h=g[l],c.push(this._normalize(h)),this._drawValuesSeq.push(this._normalize(h));for(e=[],d=!0;d;){for(f=[],m=0,p=c.length;p>m;m++)h=c[m],f.push(h.shift()),d=h.length>0;e.push(f)}return this._drawValues=e}},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i,j,k,l,m;for(this._clear(),g=this.paddings.left+1,this._gradientPersent&&(c=this._gradientPersent/this._drawValues.length),l=this._drawValues,j=0,k=l.length;k>j;j++)i=l[j],m=[i[0],i[1]],e=m[0],f=m[1],a=this.colors[0],b=h.lighten(a,30),this.redrawValue(g,f,b),this.redrawValue(g,e,a),f>e&&100===this._pers&&(d=f-e,this.draw.line({color:this._breakColor,start:{x:g,y:e+d},end:{x:g+this._dx,y:e+d}})),g+=this._dx;return this._afterRedraw()},b}(e.VertBars),e.DiffMultiGraph=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),b.__super__.constructor.call(this,this.canvas,c),this._showNet="boolean"==typeof c.showNet?c.showNet:!0}return __extends(b,a),b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this._clear(),f=this.paddings.left+1,l=this._drawValues,h=0,j=l.length;j>h;h++){for(e=l[h],a=this._dx/(e.length+1),b=this._dx/e.length,g=f+e.length*(b-a)/2,c=i=0,k=e.length;k>i;c=++i)d=e[c],this.redrawValue(g,d,this.colors[c],{padding:1,dx:a}),g+=a;f+=this._dx}return this._afterRedraw()},b}(e.DiffGraph),e.MultiSplines=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),c.lineWidth||(c.lineWidth=3),c.barCharts=!1,b.__super__.constructor.call(this,this.canvas,c),this._smallRadius=c.smallRadius||8,this._maxRadius="number"==typeof c.maxRadius?c.maxRadius:4,this._showYAxis="boolean"==typeof c.showYAxis?c.showYAxis:!1,this._showNet="boolean"==typeof c.showNet?c.showNet:!0}return __extends(b,a),b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s;for(this._clear(),i=this.paddings.left,a=this.h-this.paddings.bottom-(this._showYAxis?2*this._netLineWidth:0),r=this._drawValuesSeq,e=n=0,p=r.length;p>n;e=++n){for(c=r[e],i=this.paddings.left,a=this.h-this.paddings.bottom-(this._showYAxis?2*this._netLineWidth:0),g=[[i,a]],f=[],d=o=0,q=c.length;q>o;d=++o)k=c[d],m=a-(a-k)*this._pers/100,b=this.colors[e],s=[i,m],j=s[0],l=s[1],f.push([j,l]),i+=this._dx,i+this._dx>this.w-this.paddings._w&&i++;this.draw.polygon({points:f,color:b,lineWidth:this._lineWidth,open:!0}),f.push([j,this.h-this.paddings._h]),f.push([this.paddings.left,this.h-this.paddings._h]),this.draw.polygon({points:f,color:b,fill:h.rgba(b,.4)}),this._showMax&&this._drawMax()}return this._afterRedraw()},b}(e.DiffMultiGraph),e.ManyRoadmaps=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),b.__super__.constructor.call(this,this.canvas,c),this._lineWidth=c.lineWidth||2,this._smallRadius="undefined"==typeof c.smallRadius?this._lineWidth:c.smallRadius,this._maxRadius="number"==typeof c.maxRadius?c.maxRadius:4,this._showNet="boolean"==typeof c.showNet?c.showNet:!0}return __extends(b,a),b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(this._clear(),o=this._drawValuesSeq,c=k=0,m=o.length;m>k;c=++k){for(f=o[c],b=this.colors[c],a=[],e=[],g=this.paddings.left+1+this._dx/2,d=l=0,n=f.length;n>l;d=++l)i=f[d],this._smallRadius>0&&a.push({type:"circle",center:{x:g,y:i},radius:this._smallRadius,lineWidth:0,fill:b}),d>0&&e.push({type:"line",start:{x:h,y:j},end:{x:g,y:i},lineWidth:this._lineWidth,color:b}),this._showMax&&0===d&&this._drawMax(25,g,i,b),p=[g,i],h=p[0],j=p[1],g+=this._dx;this.draw.multiDraw(e),this.draw.multiDraw(a)}return this._afterRedraw()},b.prototype._drawMax=function(a,b,c,d){return this._pers>50?this.draw.text({text:a,font:this._onGraphFont,offset:{x:b,y:c*(2*(this._pers-50)/100)-5,x2:b+this._dx},color:d,fill:d}):void 0},b}(e.DiffMultiGraph),e.Splines=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),c.lineWidth||(c.lineWidth=3),c.barCharts=!1,b.__super__.constructor.call(this,this.canvas,c),this._smallRadius=c.smallRadius||8,this._maxRadius="number"==typeof c.maxRadius?c.maxRadius:4,this._showYAxis="boolean"==typeof c.showYAxis?c.showYAxis:!1}return __extends(b,a),b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i,k,l,m,n,o,p,q,r;for(this._clear(),k=this.paddings.left,f=[],a=this.h-this.paddings.bottom-(this._showYAxis?2*this._netLineWidth:0),e=[[k,a]],c=this._drawValues.slice(0),i=[],d=p=0,q=c.length;q>p;d=++p)m=c[d],o=a-(a-m)*j(100,this._pers)/100,b=this.colors[0],d>0&&(g={type:"qcurve",start:{x:l,y:n},cp:{x:(l+k)/2,y:(n+o)/2},end:{x:k,y:o},lineWidth:this._lineWidth,color:b},e.push([l,n]),e.push([k,o]),f.push(g),this._shadow&&i.push({type:"qcurve",start:{x:l+this._shadow.dx,y:n+this._shadow.dy},cp:{x:(l+k)/2+this._shadow.dx,y:(n+o)/2+this._shadow.dy},end:{x:k+this._shadow.dx,y:o+this._shadow.dy},lineWidth:this._shadow.lineWidth||this._lineWidth,color:this._shadow.color})),this._showMax&&d===this._maxIndex&&this._drawMax(this.data.values[this._maxIndex],k,m,b),r=[k,o],l=r[0],n=r[1],k+=this._dx,k+this._dx>this.w-this.paddings._w&&k++;return e.push([k-this._dx,a]),this.draw.polygon({color:b,fill:h.rgba(b,.5),points:e}),this.draw.multiDraw(i),this.draw.multiDraw(f),this._showAxis&&!this._showNet&&this._drawAxis(),this._afterRedraw()},b.prototype._drawMax=function(a,b,c,d){return this._pers>50?this.draw.text({text:a,font:this._onGraphFont,offset:{x:b,y:c*(2*(this._pers-50)/100)-5,x2:b+this._dx},color:d,fill:d}):void 0},b}(e.Graph),e.Roadmap=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),c.barCharts=!1,b.__super__.constructor.call(this,this.canvas,c),this._lineWidth=c.lineWidth||2,this._smallRadius="undefined"==typeof c.smallRadius?this._lineWidth:c.smallRadius,this._maxRadius="number"==typeof c.maxRadius?c.maxRadius:4}return __extends(b,a),b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,i,k,l,n,o,p,q;for(this._clearOnNewFrame&&this._clear(),b=[],e=[],g=this.paddings.left+1,p=this._drawValues,d=n=0,o=p.length;o>n;d=++n)k=p[d],c=this.colors[0],this._smallRadius>0&&b.push({type:"circle",center:{x:g,y:k},radius:this._smallRadius,lineWidth:0,fill:c}),d>0&&e.push({type:"line",start:{x:i,y:l},end:{x:g,y:k},lineWidth:this._lineWidth,color:h.rgba(c,.7)}),this._showMax&&d===this._maxIndex&&this._drawMax(this.data.values[this._maxIndex],g,k,c),this._showRestValues&&d!==this._maxIndex&&this._drawMax(this.data.values[d],g,k,c),q=[g,k],i=q[0],l=q[1],g+=this._dx;return f=m(j(this.w-this.paddings._w,this.h-this.paddings._h)/2-6),a={x:(this.w-this.paddings._w)/2,y:(this.h-this.paddings._h)/2},this.draw.multiDraw(e),this.draw.multiDraw(b),this._showAxis&&!this._showNet&&this._drawAxis(),this._afterRedraw()},b.prototype._drawMax=function(a,b,c,d){var e,f,g,h;return g=this._pers<50?this._pers/25:2-this._pers/100,h=j.apply(this,this._drawValues),e=_.clone(this._onGraphFont),c-e.size<this.paddings.top&&(c+=e.size),f=this._drawValues.indexOf(h),this.draw.circle({color:d,fill:d,center:{x:this.paddings.left+1+this._dx*f,y:h},radius:this._maxRadius*g}),b+=(this.w-b)*(1-this._pers/100),this.draw.text({text:a,font:e,offset:{x:b,y:c-this._lineWidth},color:d,fill:d})},b.prototype._doDrawLegend=function(){return this._pers<95?b.__super__._doDrawLegend.call(this):void 0},b.prototype._moveOnCanvas=function(){return this._pointerOnCanvas=!1},b}(e.Graph),e.Shape=function(a){function b(a,c){var d,e,f,g,h=this;this.canvas=a,null==c&&(c={}),this._smallRadius=c.smallRadius||8,this._lineWidth=c.lineWidth||this._smallRadius/2,this._showMax="boolean"==typeof c.showMax?c.showMax:!0,this._shape=c.graphType||"circle",c.needRedraw=!1,this._maxSize=c.maxSize||1e3,this._minSize=c.minSize||10,this._midSize=c.midSize||.3*this._maxSize,c.showAxisValues=!1,b.__super__.constructor.call(this,this.canvas,c),this._makeItFun="boolean"==typeof c.makeItFun?c.makeItFun:!1,this._makeItFun&&(this._hoverAction=!1),this._funTimerDelta=c.funTimer||5e3,this._maxSize=j(c.maxSize||100,this.w-this.paddings._w-20,this.h-this.paddings._h-20),this._midSize=c.midSize||.3*this._maxSize,this.newData(),null!=(null!=(g=c.gradient)?g.persent:void 0)?this._gradientPersent=c.gradient.persent:null!=c.gradient&&(this._gradientPersent=90),this._makeItFun&&(d=this._funTimerDelta/100,f=0,e=setInterval(function(){return h._makeItFun||clearInterval(e),f++,f>100&&(f=0),h._moveOnCanvas(f,0)},d))}return __extends(b,a),b.prototype.newData=function(a){var b,c,d;return null==a&&(a=this.data),null!=(null!=a?a.values:void 0)?(c=a.values,this.data=a,b=k(c),d=[b._min,b._max,b._maxIndex,b.regularNormalized,b.circleNormalized],this._min=d[0],this._max=d[1],this._maxIndex=d[2],this._drawValues=d[3],this._drawValuesCirc=d[4],d):void 0},b.prototype._clearEvents=function(){return this._makeItFun=!1,b.__super__._clearEvents.call(this)},b.prototype._drawAxis=function(){var a,b,c,d,e;if(this._showAxis){for(a=[{type:"line",color:this._axisColor,lineWidth:this._netLineWidth,start:{x:this.paddings.left,y:this._hCenter},end:{x:this.paddings.left+this._riskSize,y:this._hCenter}}],e=this._xCoords,c=0,d=e.length;d>c;c++)b=e[c],a.push({start:{x:b,y:this.h-this.paddings.bottom},end:{x:b,y:this.h-this.paddings.bottom-this._riskSize}});return this.draw.multiDraw(a)}},b.prototype._moveOnCanvas=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t;return this._pers>=100?(this._pointerOnCanvas=!0,h=100/this._legends.length,f=parseInt(a/h),g=j(1,.1+a%h/h),null!=this._xyColorData[f]&&(this._doRedraw(),o=this.h-this.paddings.bottom-this._riskSize-2,c=this._xyColorData[f],p=c.y+c.sz/2,l=this._xyColorData[f],p=l.y+l.sz+this._legendFont.size,q=o-1.2*this._legendFont.size,d=q-p,p=q-g*d,this.draw.line({start:{x:c.x,y:p},end:{x:c.x,y:q},lineWidth:1,color:c.col}),null!=(null!=(r=this._legends[f])?r.legend:void 0)&&(k=""+this._legendMarker+" "+this._legends[f].legend,e=this.draw.makeFontString(this._legendFont),i=this.draw.measureText(e,k),s=[this._xCoords[f]-i/2,[this._xCoords[f]+i/2]],m=s[0],n=s[1],b=this._legends[f].color,this.draw.text({font:this._legendFont,text:k,color:b,offset:{x:m,y:o,x2:n}}),f!==this._maxIndex&&(k=""+this.data.values[f],i=this.draw.measureText(e,k),t=[this._xCoords[f]-i/2,[this._xCoords[f]+i/2]],m=t[0],n=t[1]),this.draw.text({font:this._legendFont,text:k,color:b,offset:{x:m,y:p,x2:n}}))),this._pointerOnCanvas=!1):void 0},b.prototype._doDrawLegend=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this;if(this._pers<95){for(d=1.2,"small-caps"===this._legendFont.variant&&this._legends.map(function(a){return a.legend=a.legend.toLowerCase()}),c=this.draw.makeFontString(this._legendFont),e=this._legends.map(function(a){return q.draw.measureText(c,""+q._legendMarker+a.legend)}),j=this.h-this.paddings.bottom-this._riskSize-2,k=this.paddings.top+this._legendFont.size,n=this._legends,p=[],a=l=0,m=n.length;m>l;a=++l)b=n[a],o=[this._xCoords[a]-e[a]/2,[this._xCoords[a]+e[a]/2]],g=o[0],h=o[1],i=0===a%2?j:k,f=""+this._legendMarker+b.legend,p.push(this.draw.text({font:this._legendFont,text:f,color:b.color,offset:{x:g,y:i,x2:h}}));return p}},b.prototype._normalize=function(a){var b=this;return a.map(function(a){var c;return c=a/b._max*b._maxSize,c<b._minSize&&(c=b._minSize),c})},b.prototype.redraw=function(){var a,b,c,d,e,f,g,i,j,k;for(this._start=Date.now(),d=this.w-this.paddings._w-this._maxSize,this._dx=d/(this._drawValues.length-1),this._hCenter=this.paddings.top+(this.h-this.paddings.top-this.paddings.bottom)/2,g=this.paddings.left+this._maxSize/2,this._xCoords=[],this._gradientPersent&&(b=this._gradientPersent/this._drawValues.length),this._xyColorData=[],k=this._drawValues,c=i=0,j=k.length;j>i;c=++i)e=k[c],a=this.colors[c]||this.colors[0],null!=b&&(a=h.lighten(a,parseInt(c*b))),this._pers<20?e=this._midSize/(this._pers/100):e*=this._maxSize/100,f={x:g,y:this._hCenter,sz:e,col:a},c===this._maxIndex&&(f.maxIndex=!0),this._xyColorData.push(f),this._xCoords.push(g),g+=this._dx;return this._doRedraw()},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h;for(this._clear(),a=Date.now()-this._start,this._pers=100*(a/this._redrawTime),this._overflow=this._pers>210,this._pers>200&&(this._pers=200),e=this.paddings.left+this._maxSize,this._showAxis&&this._drawAxis(),c={},h=this._xyColorData,b=f=0,g=h.length;g>f;b=++f)d=h[b],this.redrawValue(d.x,d.y,d.sz,d.col,b),b===this._maxIndex&&this._showMax&&(c={value:this.data.values[this._maxIndex].toString(),x:d.x,y:d.y,col:d.col,sz:d.sz},this._drawMax(c.value,c.x,c.y,c.col,c.sz));return this._afterRedraw()},b.prototype._drawMax=function(a,b,c,d,e){var f,g;return f=_.clone(this._onGraphFont),g=e*(101-j(100,this._pers)),f.size=.3*g,"circle"===this.graphType&&(d=h.inverse(d)),this.draw.text({text:a,font:f,offset:{x:b-g,y:c+f.size/3,x2:b+g},color:d,fill:d})},b.prototype.redrawValue=function(a,b,c,d,e,f){var g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;switch(null==f&&(f=0),o=j(this._pers,100),p=o*c/200,this._shape){case"triangle":return k=o*c/200||0,this.draw.triangle({color:d,fill:d,p1:{x:a,y:b-k},p2:{x:a-k,y:b+k},p3:{x:a+k,y:b+k}});case"sector":return l=[{type:"circle",color:d,lineWidth:this._lineWidth,center:{x:a,y:b},radius:p},{type:"sector",startAngle:240,endAngle:120,fill:d}],this.draw.multiDraw(l);case"torus":if(e===this._maxIndex){for(q=j(100,this._pers),r=0,t=[{type:"arc",color:"transparent",lineWidth:this._lineWidth,lineCap:"butt",radius:p,center:{x:a,y:b},startAngle:r,endAngle:360}],x=this._drawValuesCirc,n=v=0,w=x.length;w>v;n=++v)u=x[n],m=360*u*q/100,d=this.colors[n],t.push({startAngle:r,endAngle:j(360,r+m),color:d}),r+=m;return this.draw.multiDraw(t)}return this.draw.circle({color:d,lineWidth:this._lineWidth,center:{x:a,y:b},radius:p});case"torus-parts":for(s=[{type:"arc",lineCap:"butt",color:d,lineWidth:this._lineWidth,center:{x:a,y:b},radius:p,startAngle:0,endAngle:0}],y=[4,6],h=y[0],i=y[1],50>p&&(z=[8,15],h=z[0],i=z[1]),30>p&&(A=[20,40],h=A[0],i=A[1]),g=i+h,m=0;360>=m;)s.push({startAngle:m+h,endAngle:m+h+i}),m+=g;return this.draw.multiDraw(s);case"gaped-circle":return this.draw.gapedCircle({color:d,fill:d,center:{x:a,y:b},radius:p,gapSize:2,gapStep:2});default:return this.draw.circle({color:d,fill:d,center:{x:a,y:b},radius:p})}},b}(e.Graph),e.Circle=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),c.showAxisValues=!1,this._minAngleValue="number"==typeof c.minAngleValue?c.minAngleValue:2,b.__super__.constructor.call(this,this.canvas,c),this._angle||(this._angle=360),this._startAngle||(this._startAngle=0),this._rotAngle||(this._rotAngle=0),this.graphType=c.graphType||"sector",this._lineCap="arc"===this.graphType?"butt":"round",this._bigRadius=c.radius||j(this.w-this.paddings._w,this.h-this.paddings._h)/2,this._bigRadius-=this._lineWidth,this._bigRadius<this._lineWidth&&(this._bigRadius=this._lineWidth),this._smallRadius=c.smallRadius||i(3,f(.1*this._bigRadius)),this._centerColor=c.centerColor||null,this.colors=c.colors||["#ad009b","#ad8f00","#ff1184","#00ad40","#00ad9f","#ff3311","#ad6700","#00db57"],this.bgColor=c.bgColor||"transparent",this.redraw()}return __extends(b,a),b.prototype.redraw=function(){var a,b,c,d=this;return this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw?(this._lastRedraw=this._start,this._bigRadius?(b=j(this.w-this.paddings._w,this.h-this.paddings._h)/2-this._lineWidth,this._bigRadius>b&&(this._bigRadius=b),this._start=Date.now(),this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.paddings.top+(this.h-this.paddings.bottom)/2,this._gradientPersent&&(a=this._gradientPersent/this._drawValues.length,this.colors=function(){c=[];for(var a=0,b=this._drawValues.length;b>=0?b>=a:a>=b;b>=0?a++:a--)c.push(a);return c}.apply(this).map(function(b){return h.lighten(d.colors[0],parseInt(b*a))}),this.newLegends()),this._doRedraw()):void 0):void 0},b.prototype._moveOnCanvas=function(a){var b,c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v=this;if(this._pers>=100&&this._legends.length>1){if(this._pointerOnCanvas=!0,m=100/this._legends.length,k=parseInt(a/m),l=j(1,.1+a%m/m),null==this._legends[k])return;for(this._doRedraw(),b=this._drawValues[k],n=this._startAngle,u=this._drawValues,d=s=0,t=u.length;t>s&&(p=u[d],c=p*this._angle,d!==k);d=++s)n+=c;switch(o=[{type:this.graphType,lineWidth:2*this._lineWidth,radius:this._bigRadius,center:{x:this._x,y:this._y},startAngle:n,endAngle:n+c,lineCap:this._lineCap,rotate:this._rotAngle,color:this.colors[k]}],h=[this._legends[k].legend,this.data.values[k].toString()],e=this.draw.makeFontString(this._legendFont),g=i.apply(this,h.map(function(a){return v.draw.measureText(e,a)})),r=this._legendFont.size+2,f=1.2,this._legendAppears){case"top-left":case"bottom-left":q=this._netLineWidth+2;break;default:q=this.w-g-this._netLineWidth-this._legendEdgeOffset}return 0===this._legendAppears.indexOf("bottom")&&(r=this._h-h.length*f*this._legendFont.size),o.push({type:"text",font:this._legendFont,text:this._legends[k].legend,offset:{x:q,y:r}}),r+=1.2*this._legendFont.size,k!==this._maxIndex&&o.push({text:this.data.values[k],offset:{x:q,y:r}}),this.draw.multiDraw(o),this._pointerOnCanvas=!1}},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,k,l;for(this._clear(),e=this._startAngle,f=[{rotate:this._rotAngle,lineCap:this._lineCap,lineWidth:this._lineWidth,type:this.graphType,color:this.bgColor,fill:this.bgColor,radius:this._bigRadius+1,center:{x:this._x,y:this._y},startAngle:e,endAngle:this._angle}],l=this._drawValues,d=i=0,k=l.length;k>i;d=++i){switch(h=l[d],b=h*this._angle*this._pers/100,a=this.colors[d],this.graphType){case"torus-parts":for(f.push({type:"arc",lineCap:"butt",color:a,lineWidth:this._lineWidth,center:{x:this._x,y:this._y},radius:this._bigRadius,startAngle:e,endAngle:e}),c=j(this._angle,e+b),g=e;c>=g;)f.push({startAngle:g+4,endAngle:g+10}),g+=10;break;case"arc":f.push({rotate:this._rotAngle,lineCap:this._lineCap,lineWidth:this._lineWidth,type:this.graphType,color:a,radius:this._bigRadius,center:{x:this._x,y:this._y},startAngle:e,endAngle:j(this._angle,e+b)});break;default:f.push({rotate:this._rotAngle,lineCap:this._lineCap,lineWidth:this._lineWidth,type:this.graphType,color:a,fill:a,radius:this._bigRadius,center:{x:this._x,y:this._y},startAngle:e,endAngle:j(this._angle,e+b)})}e+=b}return this._centerColor&&f.push({type:"circle",color:this._centerColor,fill:this._centerColor,radius:this._smallRadius}),this.draw.multiDraw(f),this._showMax&&this._drawMax(this._realMax,this._x,this._y,this.colors[this._maxIndex],2*(100-this._pers+1)*this._smallRadius),this._afterRedraw()},b.prototype._drawMax=function(a,b,c,d,e){var f;return/\d+\.\d+/.test(a.toString())&&(a=a.toFixed(1)),f=_.clone(this._onGraphFont),f.size=i(f.size,.4*e),this.draw.text({text:a,font:f,offset:{x:b-e,y:c+f.size/3,x2:b+e},color:d,fill:d})},b.prototype.newData=function(a){var b;return null!=(null!=a?a.values:void 0)?(this.data=a,this.data=a||this.data,b=this.data.values,this._max=b.reduce(function(a,b){return a+b}),this._min=0,this._drawValues=this._normalize(b)):void 0},b.prototype._normalize=function(a){var b,c=this;return b=0,this._realMax=i.apply(this,a),this._maxIndex=a.indexOf(this._realMax),a.map(function(a){return 360*(a/c._max)<c._minAngleValue?b+=c._minAngleValue/360:void 0}),a=a.map(function(a){var d;return d=a/c._max,a===c._realMax&&(d-=b),360*d<c._minAngleValue&&(d=c._minAngleValue/360),d})},b}(e.Graph),e.HalfCircle=function(a){function b(a,c){switch(this.canvas=a,null==c&&(c={}),this._angle=180,this._pos=c.graphType||"bottom",this._pos){case"top":this._rotAngle=180;break;case"left":this._rotAngle=270;break;case"right":this._rotAngle=90;break;default:this._rotAngle=0}b.__super__.constructor.call(this,this.canvas,c),this._bigRadius=j(2*this._bigRadius,this.h-this.paddings._h,this.w-this.paddings._w),this.redraw()}return __extends(b,a),b.prototype.redraw=function(){if(this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw&&(this._lastRedraw=this._start,this._bigRadius)){switch(this._start=Date.now(),this._bigRadius=j(this.w-this.paddings._w,this.h-this.paddings._h)/2-this._lineWidth,this._pos){case"top":this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.paddings.top;break;case"left":this._x=this.paddings.left,this._y=this.paddings.top+(this.h-this.paddings.top)/2;break;case"right":this._x=this.w-this.paddings.right,this._y=this.paddings.top+(this.h-this.paddings.top)/2;break;default:this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.h-this.paddings.top}return this._doRedraw()}},b}(e.Circle),e.ManyCircles=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),b.__super__.constructor.call(this,this.canvas,c),this._skrewAngle||(this._skrewAngle=c.skrewAngle||0),this._wireColor=null!=c.wireColor?c.wireColor:h.rgba("#777",.95)}return __extends(b,a),b.prototype._moveOnCanvas=function(a){var b,c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=this;if(this._pers>=100&&this._legends.length>1){if(this._pointerOnCanvas=!0,n=100/this._legends.length,l=parseInt(a/n),m=j(1,.1+a%n/n),null==this._legends[l])return;for(this._doRedraw(),p=this._bigRadius,o=this._angle*this._pers/100,x=this._drawValues,d=v=0,w=x.length;w>v;d=++v){if(s=x[d],g=this._linesWidth[d]||6,q=0,1===s?(y=[360,0],c=y[0],b=y[1]):(c=q+s*this._angle,b=(c+q)/2,d%2?b+=o:b-=o),d===l){switch(r=[{type:"arc",color:this.colors[l],radius:p,center:{x:this._x,y:this._y},startAngle:this.normalizeAngle(q-b),endAngle:this.normalizeAngle(c-b),lineWidth:2*(g-1),rotate:this.normalizeAngle(this._skrewAngle-this._angle)}],k=[this._legends[l].legend,this.data.values[l].toString()],e=this.draw.makeFontString(this._legendFont),h=i.apply(this,k.map(function(a){return z.draw.measureText(e,a)
})),u=this._legendFont.size+2,f=1.2,this._legendAppears){case"top-left":case"bottom-left":t=this._netLineWidth+2;break;default:t=this.w-h-this._netLineWidth-this._legendEdgeOffset}0===this._legendAppears.indexOf("bottom")&&(u=this._h-k.length*f*this._legendFont.size),r.push({type:"text",font:this._legendFont,text:this._legends[l].legend,offset:{x:t,y:u}}),u+=1.2*this._legendFont.size,r.push({text:this.data.values[l],offset:{x:t,y:u}}),this.draw.multiDraw(r);break}p-=g,g>p&&(p=g)}return this._pointerOnCanvas=!1}},b.prototype.newData=function(a){var b,c,d,e;if(a)return this.data=a||this.data,b=this.data.values,c=[i.apply(this,b),j.apply(this,b)],this._max=c[0],this._min=c[1],this._drawValues=this._normalize(b),this._linesWidth=function(){d=[];for(var a=1,b=this._drawValues.length;b>=1?b>=a:a>=b;b>=1?a++:a--)d.push(a);return d}.apply(this).map(function(b){return null!=(null!=a?a.linesWidth:void 0)?null!=a.linesWidth[b-1]?a.linesWidth[b-1]:a.linesWidth[0]||a.linesWidth:6}),this._angles=null!=(null!=a?a.angles:void 0)?a.angles:function(){e=[];for(var a=1,b=this._drawValues.length;b>=1?b>=a:a>=b;b>=1?a++:a--)e.push(a);return e}.apply(this).map(function(){return 0})},b.prototype.redraw=function(){return this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw?(this._lastRedraw=this._start,this._bigRadius?(this._start=Date.now(),this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.paddings.top+(this.h-this.paddings.bottom)/2,this._doRedraw()):void 0):void 0},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(this._clear(),e=[],g=this._bigRadius,o=this._linesWidth,k=0,m=o.length;m>k;k++)d=o[k],e.push({type:"circle",color:this._wireColor,radius:g,center:{x:this._x,y:this._y},lineWidth:d}),g-=d,d>g&&(g=d);for(this.draw.multiDraw(e),h=this._startAngle,i=[],g=this._bigRadius,f=this._angle*this._pers/100,p=this._drawValues,c=l=0,n=p.length;n>l;c=++l)j=p[c],d=this._linesWidth[c]||6,h=0,1===j?(q=[360,0],b=q[0],a=q[1]):(b=h+j*this._angle,a=(b+h)/2,c%2?a+=f:a-=f),i.push({type:"arc",color:this.colors[c],radius:g,center:{x:this._x,y:this._y},startAngle:this.normalizeAngle(h-a),endAngle:this.normalizeAngle(b-a),lineWidth:d-1,rotate:this.normalizeAngle(this._skrewAngle-this._angle)}),g-=d,d>g&&(g=d);return this.draw.multiDraw(i),this._afterRedraw()},b}(e.Circle),e.HalfManyCircles=function(a){function b(a,c){var d,e;switch(this.canvas=a,null==c&&(c={}),this._angle=180,this._pos=c.pos||"bottom",b.__super__.constructor.call(this,this.canvas,c),d=null!=(null!=(e=this._linesWidth)?e[0]:void 0)?this._linesWidth[0]:6,this._bigRadius=j(2*this._bigRadius,this.h-this.paddings._h,this.w-this.paddings._w)-2*d,this._pos){case"top":this._rotAngle=180,this._skrewAngle=270;break;case"left":this._rotAngle=270,this._skrewAngle=0;break;case"right":this._rotAngle=90,this._skrewAngle=180;break;default:this._rotAngle=0,this._skrewAngle=90}this.redraw()}return __extends(b,a),b.prototype.redraw=function(){if(this._start=Date.now(),this._start-this._lastRedraw>this._timeBeforeRedraw&&(this._lastRedraw=this._start,this._bigRadius)){switch(this._start=Date.now(),this._pos){case"top":this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.paddings.top;break;case"left":this._x=this.paddings.left,this._y=this.paddings.top+(this.h-this.paddings.top)/2;break;case"right":this._x=this.w-this.paddings.right,this._y=this.paddings.top+(this.h-this.paddings.top)/2;break;default:this._x=this.paddings.left+(this.w-this.paddings.right)/2,this._y=this.h-this.paddings.top}return this._doRedraw()}},b}(e.ManyCircles),e.FnGraph=function(a){function b(a,c){this.canvas=a,null==c&&(c={}),this.fn=c.fn||function(a,b){return null==b&&(b=1e3),a%=b,a>=0&&100>a||a>=300&&400>a?a%100/1e3:1},b.__super__.constructor.call(this,this.canvas,c),this._setupEvents()}return __extends(b,a),b.prototype._setupEvents=function(){var a=this;return $(this.canvas).on("mousedown touchstart",function(){return a._play=!a._play,a._play?a.redraw():void 0})},b.prototype.redraw=function(){return this._start=Date.now(),this._play=!0,this._doRedraw()},b.prototype._doRedraw=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this;for(d=Date.now()-this._start,this._clear(),c=this.paddings.left,b=[],a=this.h-this.paddings._h,k=[c,a*this.fn(d)],f=k[0],h=k[1],i=j=c,l=this.w-this.paddings.right;l>=c?l>=j:j>=l;i=l>=c?++j:--j)e=i-c,g=a*this.fn(d),b.push({type:"line",color:this.colors[0],start:{x:f,y:h},end:{x:e,y:g}}),d+=8,m=[e,g],f=m[0],h=m[1];return this.draw.multiDraw(b),this._showAxis&&this._drawAxis(),this._play?window.requestAnimationFrame(function(){return n._doRedraw()}):void 0},b}(e.Graph),window.FG.fg=e,e}();